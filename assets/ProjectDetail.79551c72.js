import{d as e,o as t,c as r,b as n,j as l,x as o,I as i,r as a,k as s,l as u,A as d,E as c,J as h,w as v,p as m,m as k,q as w,t as p,h as x,s as y,D as f,u as g,B as C,G as b}from"./vendor.882c7a74.js";import{a as j,b as z}from"./projectApi.0ec6fdeb.js";import{r as q}from"./index.fafd5351.js";const O={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},H=n("rect",{x:"64",y:"64",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),M=n("rect",{x:"216",y:"64",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),S=n("rect",{x:"368",y:"64",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),_=n("rect",{x:"64",y:"216",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),L=n("rect",{x:"216",y:"216",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),N=n("rect",{x:"368",y:"216",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),A=n("rect",{x:"64",y:"368",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),B=n("rect",{x:"216",y:"368",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),I=n("rect",{x:"368",y:"368",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1);var U=e({name:"AppsOutline",render:function(e,n){return t(),r("svg",O,[H,M,S,_,L,N,A,B,I])}});const F={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},V=n("path",{d:"M350.54 148.68l-26.62-42.06C318.31 100.08 310.62 96 302 96h-92c-8.62 0-16.31 4.08-21.92 10.62l-26.62 42.06C155.85 155.23 148.62 160 140 160H80a32 32 0 0 0-32 32v192a32 32 0 0 0 32 32h352a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32h-59c-8.65 0-16.85-4.77-22.46-11.32z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),P=n("circle",{cx:"256",cy:"272",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),D=n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M124 158v-22h-24v22"},null,-1);var E=e({name:"CameraOutline",render:function(e,n){return t(),r("svg",F,[V,P,D])}});const G={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},J=n("path",{d:"M480 80H32v352h448zM112 352v48H64v-48zm0-80v48H64v-48zm0-80v48H64v-48zm0-80v48H64v-48zm256 160H144v-32h224zm80 80v48h-48v-48zm0-80v48h-48v-48zm0-80v48h-48v-48zm0-80v48h-48v-48z",fill:"currentColor"},null,-1);var T=e({name:"FilmSharp",render:function(e,n){return t(),r("svg",G,[J])}});const W={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},K=n("rect",{x:"32",y:"96",width:"64",height:"368",rx:"16",ry:"16",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),Q=n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M112 224h128"},null,-1),R=n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M112 400h128"},null,-1),X=n("rect",{x:"112",y:"160",width:"128",height:"304",rx:"16",ry:"16",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),Y=n("rect",{x:"256",y:"48",width:"96",height:"416",rx:"16",ry:"16",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),Z=n("path",{d:"M422.46 96.11l-40.4 4.25c-11.12 1.17-19.18 11.57-17.93 23.1l34.92 321.59c1.26 11.53 11.37 20 22.49 18.84l40.4-4.25c11.12-1.17 19.18-11.57 17.93-23.1L445 115c-1.31-11.58-11.42-20.06-22.54-18.89z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1);var $=e({name:"LibraryOutline",render:function(e,n){return t(),r("svg",W,[K,Q,R,X,Y,Z])}});m("data-v-3dc27d04");const ee={class:"w-full h-56 bg-gray-100 rounded overflow-hidden flex relative"},te={class:"ml-10"},re={key:0,class:"pt-4 text-3xl text-gray-700"},ne={class:"pt-2 text-base text-gray-500 desc-content"},le={key:0},oe={class:"absolute right-10 top-4"};k();var ie=e({props:{id:{type:String,required:!0},name:{type:String,required:!1},desc:{type:String,required:!1}},emits:["update:desc","update:name","save"],setup(e,{emit:r}){const m=e,k=l(""),p=l("");o((()=>{k.value=m.desc||"",p.value=m.name||""})),i((()=>k.value),(()=>{r("update:desc",k.value)})),i((()=>p.value),(()=>{r("update:name",p.value)}));const x=l(!1),y=()=>{x.value=!x.value,x.value||r("save")};return(e,r)=>{const l=a("n-image"),o=a("n-button");return t(),s("div",ee,[n(l,{class:"flex-shrink-0 h-56 flex-shrink-0",src:"../../../src/assets/cover.jpg"}),u("div",te,[x.value?c((t(),s("input",{key:1,"onUpdate:modelValue":r[0]||(r[0]=e=>p.value=e),class:"mt-4 text-3xl text-gray-700 input-name text-3xl"},null,512)),[[h,p.value]]):(t(),s("div",re,d(p.value),1)),u("div",ne,[x.value?c((t(),s("textarea",{key:1,"onUpdate:modelValue":r[1]||(r[1]=e=>k.value=e),class:"textarea"},null,512)),[[h,k.value]]):(t(),s("div",le,d(k.value),1))])]),u("div",oe,[n(o,{onClick:y},{default:v((()=>[w(d(x.value?"保存":"编辑"),1)])),_:1})])])}}});ie.__scopeId="data-v-3dc27d04";const ae={class:"\n        w-full\n        h-16\n        border-b border-solid border-gray-100\n        flex\n        items-center\n        px-10\n        justify-between\n      "},se=w(" 所有项目 "),ue={class:"p-5"},de={class:"flex flex-wrap p-5"},ce=["onClick"];var he=e({setup(e){const o=p(),i=l(!1),c=x(),h=l({id:"",name:"",desc:""}),m=l([{title:"分镜头列表",icon:"CameraOutline",pageName:"ShootList"},{title:"项目统筹",icon:"AppsOutline",pageName:"ProjectWhole"},{title:"拍摄计划 & 通告",icon:"FilmSharp",pageName:"TakeNoticed"},{title:"媒体库",icon:"LibraryOutline",pageName:"MediaLibrary"}]),k=()=>{q.push({name:"ProjectHome"})},O=async()=>{i.value=!0;try{await z(o.query.parentId+"",h.value)}catch(e){c.error("保存失败")}i.value=!1};return y((()=>{(async()=>{i.value=!0;try{h.value=await j(o.query.id+"",o.query.parentId+"")}catch(e){c.error("获取项目数据失败")}i.value=!1})()})),(e,l)=>{const c=a("n-breadcrumb-item"),p=a("n-breadcrumb"),x=a("n-icon"),y=a("n-spin");return t(),r(y,{show:i.value},{default:v((()=>[u("div",ae,[n(p,null,{default:v((()=>[n(c,{onClick:k},{default:v((()=>[se])),_:1}),n(c,null,{default:v((()=>[w(d(h.value.name),1)])),_:1})])),_:1})]),u("div",ue,[n(ie,{onSave:O,id:h.value.id,name:h.value.name,"onUpdate:name":l[0]||(l[0]=e=>h.value.name=e),desc:h.value.desc,"onUpdate:desc":l[1]||(l[1]=e=>h.value.desc=e)},null,8,["id","name","desc"])]),u("div",de,[(t(!0),s(b,null,f(m.value,((e,l)=>(t(),s("div",{class:"\n          w-80\n          h-48\n          bg-gray-100\n          mr-2.5\n          mb-2.5\n          rounded\n          flex flex-col\n          items-center\n          justify-center\n          cursor-pointer\n        ",key:l,onClick:t=>(e=>{q.push({name:e.pageName,query:{id:o.query.id,name:h.value.name}})})(e)},[n(x,{size:"40",class:"mb-5"},{default:v((()=>["CameraOutline"===e.icon?(t(),r(g(E),{key:0})):C("v-if",!0),"AppsOutline"===e.icon?(t(),r(g(U),{key:1})):C("v-if",!0),"FilmSharp"===e.icon?(t(),r(g(T),{key:2})):C("v-if",!0),"LibraryOutline"===e.icon?(t(),r(g($),{key:3})):C("v-if",!0)])),_:2},1024),w(" "+d(e.title),1)],8,ce)))),128))])])),_:1},8,["show"])}}});export{he as default};
