import{d as e,o as r,c as t,b as l,j as n,x as o,I as i,r as a,k as s,l as u,u as d,A as c,E as h,J as v,w as m,p as k,m as w,q as p,t as x,h as y,s as f,D as g,B as C,G as b}from"./vendor.882c7a74.js";import{c as j,a as z,b as q}from"./cover.a765defc.js";import{r as O}from"./index.2a96386e.js";const H={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},M=l("rect",{x:"64",y:"64",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),S=l("rect",{x:"216",y:"64",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),_=l("rect",{x:"368",y:"64",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),N=l("rect",{x:"64",y:"216",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),L=l("rect",{x:"216",y:"216",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),B=l("rect",{x:"368",y:"216",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),A=l("rect",{x:"64",y:"368",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),I=l("rect",{x:"216",y:"368",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),U=l("rect",{x:"368",y:"368",width:"80",height:"80",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1);var F=e({name:"AppsOutline",render:function(e,l){return r(),t("svg",H,[M,S,_,N,L,B,A,I,U])}});const V={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},P=l("path",{d:"M350.54 148.68l-26.62-42.06C318.31 100.08 310.62 96 302 96h-92c-8.62 0-16.31 4.08-21.92 10.62l-26.62 42.06C155.85 155.23 148.62 160 140 160H80a32 32 0 0 0-32 32v192a32 32 0 0 0 32 32h352a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32h-59c-8.65 0-16.85-4.77-22.46-11.32z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),D=l("circle",{cx:"256",cy:"272",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),E=l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M124 158v-22h-24v22"},null,-1);var G=e({name:"CameraOutline",render:function(e,l){return r(),t("svg",V,[P,D,E])}});const J={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},T=l("path",{d:"M480 80H32v352h448zM112 352v48H64v-48zm0-80v48H64v-48zm0-80v48H64v-48zm0-80v48H64v-48zm256 160H144v-32h224zm80 80v48h-48v-48zm0-80v48h-48v-48zm0-80v48h-48v-48zm0-80v48h-48v-48z",fill:"currentColor"},null,-1);var W=e({name:"FilmSharp",render:function(e,l){return r(),t("svg",J,[T])}});const K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Q=l("rect",{x:"32",y:"96",width:"64",height:"368",rx:"16",ry:"16",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),R=l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M112 224h128"},null,-1),X=l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M112 400h128"},null,-1),Y=l("rect",{x:"112",y:"160",width:"128",height:"304",rx:"16",ry:"16",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),Z=l("rect",{x:"256",y:"48",width:"96",height:"416",rx:"16",ry:"16",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),$=l("path",{d:"M422.46 96.11l-40.4 4.25c-11.12 1.17-19.18 11.57-17.93 23.1l34.92 321.59c1.26 11.53 11.37 20 22.49 18.84l40.4-4.25c11.12-1.17 19.18-11.57 17.93-23.1L445 115c-1.31-11.58-11.42-20.06-22.54-18.89z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1);var ee=e({name:"LibraryOutline",render:function(e,l){return r(),t("svg",K,[Q,R,X,Y,Z,$])}});k("data-v-3dc27d04");const re={class:"w-full h-56 bg-gray-100 rounded overflow-hidden flex relative"},te=["src"],le={class:"ml-10"},ne={key:0,class:"pt-4 text-3xl text-gray-700"},oe={class:"pt-2 text-base text-gray-500 desc-content"},ie={key:0},ae={class:"absolute right-10 top-4"};w();var se=e({props:{id:{type:[String,Number],required:!0},name:{type:String,required:!1},desc:{type:String,required:!1}},emits:["update:desc","update:name","save"],setup(e,{emit:t}){const k=e,w=n(""),x=n("");o((()=>{w.value=k.desc||"",x.value=k.name||""})),i((()=>w.value),(()=>{t("update:desc",w.value)})),i((()=>x.value),(()=>{t("update:name",x.value)}));const y=n(!1),f=()=>{y.value=!y.value,y.value||t("save")};return(e,t)=>{const n=a("n-button");return r(),s("div",re,[u("img",{class:"flex-shrink-0 h-56 w-56 flex-shrink-0",src:d(j)},null,8,te),u("div",le,[y.value?h((r(),s("input",{key:1,"onUpdate:modelValue":t[0]||(t[0]=e=>x.value=e),class:"mt-4 text-3xl text-gray-700 input-name text-3xl"},null,512)),[[v,x.value]]):(r(),s("div",ne,c(x.value),1)),u("div",oe,[y.value?h((r(),s("textarea",{key:1,"onUpdate:modelValue":t[1]||(t[1]=e=>w.value=e),class:"textarea",placeholder:"单击此处添加项目备注"},null,512)),[[v,w.value]]):(r(),s("div",ie,c(w.value),1))])]),u("div",ae,[l(n,{onClick:f},{default:m((()=>[p(c(y.value?"保存":"编辑"),1)])),_:1})])])}}});se.__scopeId="data-v-3dc27d04";const ue={class:"\n        w-full\n        h-16\n        border-b border-solid border-gray-100\n        flex\n        items-center\n        px-10\n        justify-between\n      ",style:{"background-color":"#ffffff"}},de=p(" 所有项目 "),ce={class:"p-5"},he={class:"flex flex-wrap p-5"},ve=["onClick"];var me=e({setup(e){const o=x(),i=n(!1),h=y(),v=n({id:"",name:"",desc:""}),k=n([{title:"分镜头列表",icon:"CameraOutline",pageName:"ShootList"},{title:"项目统筹",icon:"AppsOutline",pageName:"ProjectWhole"},{title:"拍摄计划 & 通告",icon:"FilmSharp",pageName:"TakeNoticed"},{title:"媒体库",icon:"LibraryOutline",pageName:"MediaLibrary"}]),w=()=>{O.push({name:"ProjectHome"})},j=async()=>{i.value=!0;try{await q(o.query.parentId+"",v.value)}catch(e){h.error("保存失败")}i.value=!1};return f((()=>{(async()=>{i.value=!0;try{v.value=await z(o.query.id+"",o.query.parentId+"")}catch(e){h.error("获取项目数据失败")}i.value=!1})()})),(e,n)=>{const h=a("n-breadcrumb-item"),x=a("n-breadcrumb"),y=a("n-icon"),f=a("n-spin");return r(),t(f,{show:i.value},{default:m((()=>[u("div",ue,[l(x,null,{default:m((()=>[l(h,{onClick:w},{default:m((()=>[de])),_:1}),l(h,null,{default:m((()=>[p(c(v.value.name),1)])),_:1})])),_:1})]),u("div",ce,[l(se,{onSave:j,id:v.value.id,name:v.value.name,"onUpdate:name":n[0]||(n[0]=e=>v.value.name=e),desc:v.value.desc,"onUpdate:desc":n[1]||(n[1]=e=>v.value.desc=e)},null,8,["id","name","desc"])]),u("div",he,[(r(!0),s(b,null,g(k.value,((e,n)=>(r(),s("div",{class:"\n          w-80\n          h-48\n          bg-gray-100\n          mr-2.5\n          mb-2.5\n          rounded\n          flex flex-col\n          items-center\n          justify-center\n          cursor-pointer\n        ",key:n,onClick:r=>(e=>{O.push({name:e.pageName,query:{id:o.query.id,name:v.value.name}})})(e)},[l(y,{size:"40",class:"mb-5"},{default:m((()=>["CameraOutline"===e.icon?(r(),t(d(G),{key:0})):C("v-if",!0),"AppsOutline"===e.icon?(r(),t(d(F),{key:1})):C("v-if",!0),"FilmSharp"===e.icon?(r(),t(d(W),{key:2})):C("v-if",!0),"LibraryOutline"===e.icon?(r(),t(d(ee),{key:3})):C("v-if",!0)])),_:2},1024),p(" "+c(e.title),1)],8,ve)))),128))])])),_:1},8,["show"])}}});export{me as default};
