var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,i=(e,i)=>{for(var r in i||(i={}))n.call(i,r)&&a(e,r,i[r]);if(t)for(var r of t(i))o.call(i,r)&&a(e,r,i[r]);return e};import{d as r,o as l,c as s,a as c,s as u,r as d,u as h,h as p,t as f,w as v,j as g,l as m,q as b,v as y,m as w,i as x,A as S,y as _,p as E,k as D,T as C,F as I,B as T,E as O,x as N,G as j,C as k,H as M,I as P,J as A,g as L}from"./vendor.6e217547.js";import{g as V,E as R,A as U}from"./uuid.4ba239b0.js";const X={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},B=c("path",{d:"M64 144l192 224l192-224H64z",fill:"currentColor"},null,-1);var Y=r({name:"CaretDownSharp",render:function(e,t){return l(),s("svg",X,[B])}});
/*!
  * vue-draggable-next v2.0.0
  * (c) 2021 Anish George
  * @license MIT
  */
/**!
 * Sortable 1.13.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){H(e,t,n[t])}))}return e}function W(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function q(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var J=q(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),G=q(/Edge/i),Z=q(/firefox/i),K=q(/safari/i)&&!q(/chrome/i)&&!q(/android/i),Q=q(/iP(ad|od|hone)/i),ee=q(/chrome/i)&&q(/android/i),te={capture:!1,passive:!1};function ne(e,t,n){e.addEventListener(t,n,!J&&te)}function oe(e,t,n){e.removeEventListener(t,n,!J&&te)}function ae(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function ie(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function re(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&ae(e,t):ae(e,t))||o&&e===n)return e;if(e===n)break}while(e=ie(e))}return null}var le,se=/\s+/g;function ce(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(se," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(se," ")}}function ue(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function de(e,t){var n="";if("string"==typeof e)n=e;else do{var o=ue(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function he(e,t,n){if(e){var o=e.getElementsByTagName(t),a=0,i=o.length;if(n)for(;a<i;a++)n(o[a],a);return o}return[]}function pe(){var e=document.scrollingElement;return e||document.documentElement}function fe(e,t,n,o,a){if(e.getBoundingClientRect||e===window){var i,r,l,s,c,u,d;if(e!==window&&e.parentNode&&e!==pe()?(r=(i=e.getBoundingClientRect()).top,l=i.left,s=i.bottom,c=i.right,u=i.height,d=i.width):(r=0,l=0,s=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!J))do{if(a&&a.getBoundingClientRect&&("none"!==ue(a,"transform")||n&&"static"!==ue(a,"position"))){var h=a.getBoundingClientRect();r-=h.top+parseInt(ue(a,"border-top-width")),l-=h.left+parseInt(ue(a,"border-left-width")),s=r+i.height,c=l+i.width;break}}while(a=a.parentNode);if(o&&e!==window){var p=de(a||e),f=p&&p.a,v=p&&p.d;p&&(s=(r/=v)+(u/=v),c=(l/=f)+(d/=f))}return{top:r,left:l,bottom:s,right:c,width:d,height:u}}}function ve(e,t,n){for(var o=we(e,!0),a=fe(e)[t];o;){var i=fe(o)[n];if(!("top"===n||"left"===n?a>=i:a<=i))return o;if(o===pe())break;o=we(o,!1)}return!1}function ge(e,t,n){for(var o=0,a=0,i=e.children;a<i.length;){if("none"!==i[a].style.display&&i[a]!==St.ghost&&i[a]!==St.dragged&&re(i[a],n.draggable,e,!1)){if(o===t)return i[a];o++}a++}return null}function me(e,t){for(var n=e.lastElementChild;n&&(n===St.ghost||"none"===ue(n,"display")||t&&!ae(n,t));)n=n.previousElementSibling;return n||null}function be(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===St.clone||t&&!ae(e,t)||n++;return n}function ye(e){var t=0,n=0,o=pe();if(e)do{var a=de(e),i=a.a,r=a.d;t+=e.scrollLeft*i,n+=e.scrollTop*r}while(e!==o&&(e=e.parentNode));return[t,n]}function we(e,t){if(!e||!e.getBoundingClientRect)return pe();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=ue(n);if(n.clientWidth<n.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!n.getBoundingClientRect||n===document.body)return pe();if(o||t)return n;o=!0}}}while(n=n.parentNode);return pe()}function xe(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Se(e,t){return function(){if(!le){var n=arguments,o=this;1===n.length?e.call(o,n[0]):e.apply(o,n),le=setTimeout((function(){le=void 0}),t)}}}function _e(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Ee(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var De="Sortable"+(new Date).getTime();function Ce(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==ue(e,"display")&&e!==St.ghost){t.push({target:e,rect:fe(e)});var n=$({},t[t.length-1].rect);if(e.thisAnimationDuration){var o=de(e,!0);o&&(n.top-=o.f,n.left-=o.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var o=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var a=!1,i=0;t.forEach((function(e){var t=0,n=e.target,r=n.fromRect,l=fe(n),s=n.prevFromRect,c=n.prevToRect,u=e.rect,d=de(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&xe(s,l)&&!xe(r,l)&&(u.top-l.top)/(u.left-l.left)==(r.top-l.top)/(r.left-l.left)&&(t=function(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}(u,s,c,o.options)),xe(l,r)||(n.prevFromRect=r,n.prevToRect=l,t||(t=o.options.animation),o.animate(n,u,l,t)),t&&(a=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),a?e=setTimeout((function(){"function"==typeof n&&n()}),i):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,o){if(o){ue(e,"transition",""),ue(e,"transform","");var a=de(this.el),i=a&&a.a,r=a&&a.d,l=(t.left-n.left)/(i||1),s=(t.top-n.top)/(r||1);e.animatingX=!!l,e.animatingY=!!s,ue(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),ue(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),ue(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){ue(e,"transition",""),ue(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}}var Ie=[],Te={initializeByDefault:!0},Oe={mount:function(e){for(var t in Te)Te.hasOwnProperty(t)&&!(t in e)&&(e[t]=Te[t]);Ie.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),Ie.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var a=e+"Global";Ie.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][a]&&t[o.pluginName][a]($({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e]($({sortable:t},n)))}))},initializePlugins:function(e,t,n,o){for(var a in Ie.forEach((function(o){var a=o.pluginName;if(e.options[a]||o.initializeByDefault){var i=new o(e,t,e.options);i.sortable=e,i.options=e.options,e[a]=i,z(n,i.defaults)}})),e.options)if(e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);void 0!==i&&(e.options[a]=i)}},getEventProperties:function(e,t){var n={};return Ie.forEach((function(o){"function"==typeof o.eventProperties&&z(n,o.eventProperties.call(t[o.pluginName],e))})),n},modifyOption:function(e,t,n){var o;return Ie.forEach((function(a){e[a.pluginName]&&a.optionListeners&&"function"==typeof a.optionListeners[t]&&(o=a.optionListeners[t].call(e[a.pluginName],n))})),o}};var Ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.evt,a=W(n,["evt"]);Oe.pluginEvent.bind(St)(e,t,$({dragEl:ke,parentEl:Me,ghostEl:Pe,rootEl:Ae,nextEl:Le,lastDownEl:Ve,cloneEl:Re,cloneHidden:Ue,dragStarted:Ke,putSortable:ze,activeSortable:St.active,originalEvent:o,oldIndex:Xe,oldDraggableIndex:Ye,newIndex:Be,newDraggableIndex:Fe,hideGhostForTarget:bt,unhideGhostForTarget:yt,cloneNowHidden:function(){Ue=!0},cloneNowShown:function(){Ue=!1},dispatchSortableEvent:function(e){je({sortable:t,name:e,originalEvent:o})}},a))};function je(e){!function(e){var t=e.sortable,n=e.rootEl,o=e.name,a=e.targetEl,i=e.cloneEl,r=e.toEl,l=e.fromEl,s=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,h=e.originalEvent,p=e.putSortable,f=e.extraEventProperties;if(t=t||n&&n[De]){var v,g=t.options,m="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||J||G?(v=document.createEvent("Event")).initEvent(o,!0,!0):v=new CustomEvent(o,{bubbles:!0,cancelable:!0}),v.to=r||n,v.from=l||n,v.item=a||n,v.clone=i,v.oldIndex=s,v.newIndex=c,v.oldDraggableIndex=u,v.newDraggableIndex=d,v.originalEvent=h,v.pullMode=p?p.lastPutMode:void 0;var b=$({},f,Oe.getEventProperties(o,t));for(var y in b)v[y]=b[y];n&&n.dispatchEvent(v),g[m]&&g[m].call(t,v)}}($({putSortable:ze,cloneEl:Re,targetEl:ke,rootEl:Ae,oldIndex:Xe,oldDraggableIndex:Ye,newIndex:Be,newDraggableIndex:Fe},e))}var ke,Me,Pe,Ae,Le,Ve,Re,Ue,Xe,Be,Ye,Fe,He,ze,$e,We,qe,Je,Ge,Ze,Ke,Qe,et,tt,nt,ot=!1,at=!1,it=[],rt=!1,lt=!1,st=[],ct=!1,ut=[],dt="undefined"!=typeof document,ht=Q,pt=G||J?"cssFloat":"float",ft=dt&&!ee&&!Q&&"draggable"in document.createElement("div"),vt=function(){if(dt){if(J)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),gt=function(e,t){var n=ue(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=ge(e,0,t),i=ge(e,1,t),r=a&&ue(a),l=i&&ue(i),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+fe(a).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+fe(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&"none"!==r.float){var u="left"===r.float?"left":"right";return!i||"both"!==l.clear&&l.clear!==u?"horizontal":"vertical"}return a&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s>=o&&"none"===n[pt]||i&&"none"===n[pt]&&s+c>o)?"vertical":"horizontal"},mt=function(e){function t(e,n){return function(o,a,i,r){var l=o.options.group.name&&a.options.group.name&&o.options.group.name===a.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(o,a,i,r),n)(o,a,i,r);var s=(n?o:a).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},o=e.group;o&&"object"==F(o)||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},bt=function(){!vt&&Pe&&ue(Pe,"display","none")},yt=function(){!vt&&Pe&&ue(Pe,"display","")};dt&&document.addEventListener("click",(function(e){if(at)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),at=!1,!1}),!0);var wt=function(e){if(ke){e=e.touches?e.touches[0]:e;var t=(a=e.clientX,i=e.clientY,it.some((function(e){if(!me(e)){var t=fe(e),n=e[De].options.emptyInsertThreshold,o=a>=t.left-n&&a<=t.right+n,l=i>=t.top-n&&i<=t.bottom+n;return n&&o&&l?r=e:void 0}})),r);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[De]._onDragOver(n)}}var a,i,r},xt=function(e){ke&&ke.parentNode[De]._isOutsideThisEl(e.target)};function St(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=z({},t),e[De]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return gt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==St.supportPointer&&"PointerEvent"in window&&!K,emptyInsertThreshold:5};for(var o in Oe.initializePlugins(this,e,n),n)!(o in t)&&(t[o]=n[o]);for(var a in mt(t),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&ft,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ne(e,"pointerdown",this._onTapStart):(ne(e,"mousedown",this._onTapStart),ne(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ne(e,"dragover",this),ne(e,"dragenter",this)),it.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),z(this,Ce())}function _t(e,t,n,o,a,i,r,l){var s,c,u=e[De],d=u.options.onMove;return!window.CustomEvent||J||G?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=o,s.related=a||t,s.relatedRect=i||fe(t),s.willInsertAfter=l,s.originalEvent=r,e.dispatchEvent(s),d&&(c=d.call(u,s,r)),c}function Et(e){e.draggable=!1}function Dt(){ct=!1}function Ct(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function It(e){return setTimeout(e,0)}function Tt(e){return clearTimeout(e)}St.prototype={constructor:St,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Qe=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,ke):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,a=o.preventOnFilter,i=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(function(e){ut.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var o=t[n];o.checked&&ut.push(o)}}(n),!ke&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||o.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!K||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=re(l,o.draggable,n,!1))&&l.animated||Ve===l)){if(Xe=be(l),Ye=be(l,o.draggable),"function"==typeof c){if(c.call(this,e,l,this))return je({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),Ne("filter",t,{evt:e}),void(a&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(o){if(o=re(s,o.trim(),n,!1))return je({sortable:t,rootEl:o,name:"filter",targetEl:l,fromEl:n,toEl:n}),Ne("filter",t,{evt:e}),!0}))))return void(a&&e.cancelable&&e.preventDefault());o.handle&&!re(s,o.handle,n,!1)||this._prepareDragStart(e,r,l)}}},_prepareDragStart:function(e,t,n){var o,a=this,i=a.el,r=a.options,l=i.ownerDocument;if(n&&!ke&&n.parentNode===i){var s=fe(n);if(Ae=i,Me=(ke=n).parentNode,Le=ke.nextSibling,Ve=n,He=r.group,St.dragged=ke,$e={target:ke,clientX:(t||e).clientX,clientY:(t||e).clientY},Ge=$e.clientX-s.left,Ze=$e.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ke.style["will-change"]="all",o=function(){Ne("delayEnded",a,{evt:e}),St.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!Z&&a.nativeDraggable&&(ke.draggable=!0),a._triggerDragStart(e,t),je({sortable:a,name:"choose",originalEvent:e}),ce(ke,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){he(ke,e.trim(),Et)})),ne(l,"dragover",wt),ne(l,"mousemove",wt),ne(l,"touchmove",wt),ne(l,"mouseup",a._onDrop),ne(l,"touchend",a._onDrop),ne(l,"touchcancel",a._onDrop),Z&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ke.draggable=!0),Ne("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(G||J))o();else{if(St.eventCanceled)return void this._onDrop();ne(l,"mouseup",a._disableDelayedDrag),ne(l,"touchend",a._disableDelayedDrag),ne(l,"touchcancel",a._disableDelayedDrag),ne(l,"mousemove",a._delayedDragTouchMoveHandler),ne(l,"touchmove",a._delayedDragTouchMoveHandler),r.supportPointer&&ne(l,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(o,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ke&&Et(ke),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;oe(e,"mouseup",this._disableDelayedDrag),oe(e,"touchend",this._disableDelayedDrag),oe(e,"touchcancel",this._disableDelayedDrag),oe(e,"mousemove",this._delayedDragTouchMoveHandler),oe(e,"touchmove",this._delayedDragTouchMoveHandler),oe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?ne(document,"pointermove",this._onTouchMove):ne(document,t?"touchmove":"mousemove",this._onTouchMove):(ne(ke,"dragend",this),ne(Ae,"dragstart",this._onDragStart));try{document.selection?It((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(ot=!1,Ae&&ke){Ne("dragStarted",this,{evt:t}),this.nativeDraggable&&ne(document,"dragover",xt);var n=this.options;!e&&ce(ke,n.dragClass,!1),ce(ke,n.ghostClass,!0),St.active=this,e&&this._appendGhost(),je({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(We){this._lastX=We.clientX,this._lastY=We.clientY,bt();for(var e=document.elementFromPoint(We.clientX,We.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(We.clientX,We.clientY))!==t;)t=e;if(ke.parentNode[De]._isOutsideThisEl(e),t)do{if(t[De]){if(t[De]._onDragOver({clientX:We.clientX,clientY:We.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);yt()}},_onTouchMove:function(e){if($e){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,a=e.touches?e.touches[0]:e,i=Pe&&de(Pe,!0),r=Pe&&i&&i.a,l=Pe&&i&&i.d,s=ht&&nt&&ye(nt),c=(a.clientX-$e.clientX+o.x)/(r||1)+(s?s[0]-st[0]:0)/(r||1),u=(a.clientY-$e.clientY+o.y)/(l||1)+(s?s[1]-st[1]:0)/(l||1);if(!St.active&&!ot){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Pe){i?(i.e+=c-(qe||0),i.f+=u-(Je||0)):i={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");ue(Pe,"webkitTransform",d),ue(Pe,"mozTransform",d),ue(Pe,"msTransform",d),ue(Pe,"transform",d),qe=c,Je=u,We=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Pe){var e=this.options.fallbackOnBody?document.body:Ae,t=fe(ke,!0,ht,!0,e),n=this.options;if(ht){for(nt=e;"static"===ue(nt,"position")&&"none"===ue(nt,"transform")&&nt!==document;)nt=nt.parentNode;nt!==document.body&&nt!==document.documentElement?(nt===document&&(nt=pe()),t.top+=nt.scrollTop,t.left+=nt.scrollLeft):nt=pe(),st=ye(nt)}ce(Pe=ke.cloneNode(!0),n.ghostClass,!1),ce(Pe,n.fallbackClass,!0),ce(Pe,n.dragClass,!0),ue(Pe,"transition",""),ue(Pe,"transform",""),ue(Pe,"box-sizing","border-box"),ue(Pe,"margin",0),ue(Pe,"top",t.top),ue(Pe,"left",t.left),ue(Pe,"width",t.width),ue(Pe,"height",t.height),ue(Pe,"opacity","0.8"),ue(Pe,"position",ht?"absolute":"fixed"),ue(Pe,"zIndex","100000"),ue(Pe,"pointerEvents","none"),St.ghost=Pe,e.appendChild(Pe),ue(Pe,"transform-origin",Ge/parseInt(Pe.style.width)*100+"% "+Ze/parseInt(Pe.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,a=n.options;Ne("dragStart",this,{evt:e}),St.eventCanceled?this._onDrop():(Ne("setupClone",this),St.eventCanceled||((Re=Ee(ke)).draggable=!1,Re.style["will-change"]="",this._hideClone(),ce(Re,this.options.chosenClass,!1),St.clone=Re),n.cloneId=It((function(){Ne("clone",n),St.eventCanceled||(n.options.removeCloneOnHide||Ae.insertBefore(Re,ke),n._hideClone(),je({sortable:n,name:"clone"}))})),!t&&ce(ke,a.dragClass,!0),t?(at=!0,n._loopId=setInterval(n._emulateDragOver,50)):(oe(document,"mouseup",n._onDrop),oe(document,"touchend",n._onDrop),oe(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",a.setData&&a.setData.call(n,o,ke)),ne(document,"drop",n),ue(ke,"transform","translateZ(0)")),ot=!0,n._dragStartId=It(n._dragStarted.bind(n,t,e)),ne(document,"selectstart",n),Ke=!0,K&&ue(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,o,a,i=this.el,r=e.target,l=this.options,s=l.group,c=St.active,u=He===s,d=l.sort,h=ze||c,p=this,f=!1;if(!ct){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=re(r,l.draggable,i,!0),T("dragOver"),St.eventCanceled)return f;if(ke.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return N(!1);if(at=!1,c&&!l.disabled&&(u?d||(o=!Ae.contains(ke)):ze===this||(this.lastPutMode=He.checkPull(this,c,ke,e))&&s.checkPut(this,c,ke,e))){if(a="vertical"===this._getDirection(e,r),t=fe(ke),T("dragOverValid"),St.eventCanceled)return f;if(o)return Me=Ae,O(),this._hideClone(),T("revert"),St.eventCanceled||(Le?Ae.insertBefore(ke,Le):Ae.appendChild(ke)),N(!0);var v=me(i,l.draggable);if(!v||function(e,t,n){var o=fe(me(n.el,n.options.draggable)),a=10;return t?e.clientX>o.right+a||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+a}(e,a,this)&&!v.animated){if(v===ke)return N(!1);if(v&&i===e.target&&(r=v),r&&(n=fe(r)),!1!==_t(Ae,i,ke,t,r,n,e,!!r))return O(),i.appendChild(ke),Me=i,j(),N(!0)}else if(r.parentNode===i){n=fe(r);var g,m,b,y=ke.parentNode!==i,w=!function(e,t,n){var o=n?e.left:e.top,a=n?e.right:e.bottom,i=n?e.width:e.height,r=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return o===r||a===l||o+i/2===r+s/2}(ke.animated&&ke.toRect||t,r.animated&&r.toRect||n,a),x=a?"top":"left",S=ve(r,"top","top")||ve(ke,"top","top"),_=S?S.scrollTop:void 0;if(Qe!==r&&(m=n[x],rt=!1,lt=!w&&l.invertSwap||y),0!==(g=function(e,t,n,o,a,i,r,l){var s=o?e.clientY:e.clientX,c=o?n.height:n.width,u=o?n.top:n.left,d=o?n.bottom:n.right,h=!1;if(!r)if(l&&tt<c*a){if(!rt&&(1===et?s>u+c*i/2:s<d-c*i/2)&&(rt=!0),rt)h=!0;else if(1===et?s<u+tt:s>d-tt)return-et}else if(s>u+c*(1-a)/2&&s<d-c*(1-a)/2)return function(e){return be(ke)<be(e)?1:-1}(t);if((h=h||r)&&(s<u+c*i/2||s>d-c*i/2))return s>u+c/2?1:-1;return 0}(e,r,n,a,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,lt,Qe===r))){var E=be(ke);do{E-=g,b=Me.children[E]}while(b&&("none"===ue(b,"display")||b===Pe))}if(0===g||b===r)return N(!1);Qe=r,et=g;var D=r.nextElementSibling,C=!1,I=_t(Ae,i,ke,t,r,n,e,C=1===g);if(!1!==I)return 1!==I&&-1!==I||(C=1===I),ct=!0,setTimeout(Dt,30),O(),C&&!D?i.appendChild(ke):r.parentNode.insertBefore(ke,C?D:r),S&&_e(S,0,_-S.scrollTop),Me=ke.parentNode,void 0===m||lt||(tt=Math.abs(m-fe(r)[x])),j(),N(!0)}if(i.contains(ke))return N(!1)}return!1}function T(l,s){Ne(l,p,$({evt:e,isOwner:u,axis:a?"vertical":"horizontal",revert:o,dragRect:t,targetRect:n,canSort:d,fromSortable:h,target:r,completed:N,onMove:function(n,o){return _t(Ae,i,ke,t,n,fe(n),e,o)},changed:j},s))}function O(){T("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function N(t){return T("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(p),p!==h&&(ce(ke,ze?ze.options.ghostClass:c.options.ghostClass,!1),ce(ke,l.ghostClass,!0)),ze!==p&&p!==St.active?ze=p:p===St.active&&ze&&(ze=null),h===p&&(p._ignoreWhileAnimating=r),p.animateAll((function(){T("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(r===ke&&!ke.animated||r===i&&!r.animated)&&(Qe=null),l.dragoverBubble||e.rootEl||r===document||(ke.parentNode[De]._isOutsideThisEl(e.target),!t&&wt(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),f=!0}function j(){Be=be(ke),Fe=be(ke,l.draggable),je({sortable:p,name:"change",toEl:i,newIndex:Be,newDraggableIndex:Fe,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){oe(document,"mousemove",this._onTouchMove),oe(document,"touchmove",this._onTouchMove),oe(document,"pointermove",this._onTouchMove),oe(document,"dragover",wt),oe(document,"mousemove",wt),oe(document,"touchmove",wt)},_offUpEvents:function(){var e=this.el.ownerDocument;oe(e,"mouseup",this._onDrop),oe(e,"touchend",this._onDrop),oe(e,"pointerup",this._onDrop),oe(e,"touchcancel",this._onDrop),oe(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;Be=be(ke),Fe=be(ke,n.draggable),Ne("drop",this,{evt:e}),Me=ke&&ke.parentNode,Be=be(ke),Fe=be(ke,n.draggable),St.eventCanceled||(ot=!1,lt=!1,rt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Tt(this.cloneId),Tt(this._dragStartId),this.nativeDraggable&&(oe(document,"drop",this),oe(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),K&&ue(document.body,"user-select",""),ue(ke,"transform",""),e&&(Ke&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Pe&&Pe.parentNode&&Pe.parentNode.removeChild(Pe),(Ae===Me||ze&&"clone"!==ze.lastPutMode)&&Re&&Re.parentNode&&Re.parentNode.removeChild(Re),ke&&(this.nativeDraggable&&oe(ke,"dragend",this),Et(ke),ke.style["will-change"]="",Ke&&!ot&&ce(ke,ze?ze.options.ghostClass:this.options.ghostClass,!1),ce(ke,this.options.chosenClass,!1),je({sortable:this,name:"unchoose",toEl:Me,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ae!==Me?(Be>=0&&(je({rootEl:Me,name:"add",toEl:Me,fromEl:Ae,originalEvent:e}),je({sortable:this,name:"remove",toEl:Me,originalEvent:e}),je({rootEl:Me,name:"sort",toEl:Me,fromEl:Ae,originalEvent:e}),je({sortable:this,name:"sort",toEl:Me,originalEvent:e})),ze&&ze.save()):Be!==Xe&&Be>=0&&(je({sortable:this,name:"update",toEl:Me,originalEvent:e}),je({sortable:this,name:"sort",toEl:Me,originalEvent:e})),St.active&&(null!=Be&&-1!==Be||(Be=Xe,Fe=Ye),je({sortable:this,name:"end",toEl:Me,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Ne("nulling",this),Ae=ke=Me=Pe=Le=Re=Ve=Ue=$e=We=Ke=Be=Fe=Xe=Ye=Qe=et=ze=He=St.dragged=St.ghost=St.clone=St.active=null,ut.forEach((function(e){e.checked=!0})),ut.length=qe=Je=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ke&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,a=n.length,i=this.options;o<a;o++)re(e=n[o],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||Ct(e));return t},sort:function(e,t){var n={},o=this.el;this.toArray().forEach((function(e,t){var a=o.children[t];re(a,this.options.draggable,o,!1)&&(n[e]=a)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(o.removeChild(n[e]),o.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return re(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=Oe.modifyOption(this,e,t);n[e]=void 0!==o?o:t,"group"===e&&mt(n)},destroy:function(){Ne("destroy",this);var e=this.el;e[De]=null,oe(e,"mousedown",this._onTapStart),oe(e,"touchstart",this._onTapStart),oe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(oe(e,"dragover",this),oe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),it.splice(it.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ue){if(Ne("hideClone",this),St.eventCanceled)return;ue(Re,"display","none"),this.options.removeCloneOnHide&&Re.parentNode&&Re.parentNode.removeChild(Re),Ue=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Ue){if(Ne("showClone",this),St.eventCanceled)return;ke.parentNode!=Ae||this.options.group.revertClone?Le?Ae.insertBefore(Re,Le):Ae.appendChild(Re):Ae.insertBefore(Re,ke),this.options.group.revertClone&&this.animate(ke,Re),ue(Re,"display",""),Ue=!1}}else this._hideClone()}},dt&&ne(document,"touchmove",(function(e){(St.active||ot)&&e.cancelable&&e.preventDefault()})),St.utils={on:ne,off:oe,css:ue,find:he,is:function(e,t){return!!re(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:Se,closest:re,toggleClass:ce,clone:Ee,index:be,nextTick:It,cancelNextTick:Tt,detectDirection:gt,getChild:ge},St.get=function(e){return e[De]},St.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(St.utils=$({},St.utils,e.utils)),Oe.mount(e)}))},St.create=function(e,t){return new St(e,t)},St.version="1.13.0";var Ot,Nt,jt,kt,Mt,Pt,At=[],Lt=!1;function Vt(){At.forEach((function(e){clearInterval(e.pid)})),At=[]}function Rt(){clearInterval(Pt)}var Ut=Se((function(e,t,n,o){if(t.scroll){var a,i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=pe(),u=!1;Nt!==n&&(Nt=n,Vt(),Ot=t.scroll,a=t.scrollFn,!0===Ot&&(Ot=we(n,!0)));var d=0,h=Ot;do{var p=h,f=fe(p),v=f.top,g=f.bottom,m=f.left,b=f.right,y=f.width,w=f.height,x=void 0,S=void 0,_=p.scrollWidth,E=p.scrollHeight,D=ue(p),C=p.scrollLeft,I=p.scrollTop;p===c?(x=y<_&&("auto"===D.overflowX||"scroll"===D.overflowX||"visible"===D.overflowX),S=w<E&&("auto"===D.overflowY||"scroll"===D.overflowY||"visible"===D.overflowY)):(x=y<_&&("auto"===D.overflowX||"scroll"===D.overflowX),S=w<E&&("auto"===D.overflowY||"scroll"===D.overflowY));var T=x&&(Math.abs(b-i)<=l&&C+y<_)-(Math.abs(m-i)<=l&&!!C),O=S&&(Math.abs(g-r)<=l&&I+w<E)-(Math.abs(v-r)<=l&&!!I);if(!At[d])for(var N=0;N<=d;N++)At[N]||(At[N]={});At[d].vx==T&&At[d].vy==O&&At[d].el===p||(At[d].el=p,At[d].vx=T,At[d].vy=O,clearInterval(At[d].pid),0==T&&0==O||(u=!0,At[d].pid=setInterval(function(){o&&0===this.layer&&St.active._onTouchMove(Mt);var t=At[this.layer].vy?At[this.layer].vy*s:0,n=At[this.layer].vx?At[this.layer].vx*s:0;"function"==typeof a&&"continue"!==a.call(St.dragged.parentNode[De],n,t,e,Mt,At[this.layer].el)||_e(At[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=we(h,!1)));Lt=u}}),30),Xt=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,a=e.activeSortable,i=e.dispatchSortableEvent,r=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||a;r();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);l(),s&&!s.el.contains(u)&&(i("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function Bt(){}function Yt(){}Bt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=ge(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Xt},z(Bt,{pluginName:"revertOnSpill"}),Yt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Xt},z(Yt,{pluginName:"removeOnSpill"}),St.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?ne(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ne(document,"pointermove",this._handleFallbackAutoScroll):t.touches?ne(document,"touchmove",this._handleFallbackAutoScroll):ne(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?oe(document,"dragover",this._handleAutoScroll):(oe(document,"pointermove",this._handleFallbackAutoScroll),oe(document,"touchmove",this._handleFallbackAutoScroll),oe(document,"mousemove",this._handleFallbackAutoScroll)),Rt(),Vt(),clearTimeout(le),le=void 0},nulling:function(){Mt=Nt=Ot=Lt=Pt=jt=kt=null,At.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(o,a);if(Mt=e,t||G||J||K){Ut(e,this.options,i,t);var r=we(i,!0);!Lt||Pt&&o===jt&&a===kt||(Pt&&Rt(),Pt=setInterval((function(){var i=we(document.elementFromPoint(o,a),!0);i!==r&&(r=i,Vt()),Ut(e,n.options,i,t)}),10),jt=o,kt=a)}else{if(!this.options.bubbleScroll||we(i,!0)===pe())return void Vt();Ut(e,this.options,we(i,!1),!1)}}},z(e,{pluginName:"scroll",initializeByDefault:!0})}),St.mount(Yt,Bt);const Ft="undefined"!=typeof window?window.console:global.console;const Ht=/-(\w)/g,zt=function(e){const t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}((e=>e.replace(Ht,((e,t)=>t?t.toUpperCase():""))));function $t(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function Wt(e,t,n){const o=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,o)}function qt(e,t){this.$nextTick((()=>this.$emit(e.toLowerCase(),t)))}function Jt(e){return t=>{null!==this.realList&&this["onDrag"+e](t),qt.call(this,e,t)}}const Gt=["Start","Add","Remove","Update","End"],Zt=["Choose","Unchoose","Sort","Filter","Clone"],Kt=["Move",...Gt,...Zt].map((e=>"on"+e));let Qt=null;const en={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:e=>e},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},tn=r({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...Gt.map((e=>e.toLowerCase())),...Zt.map((e=>e.toLowerCase()))],props:en,data:()=>({transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}),render(){const e=this.$slots.default?this.$slots.default():null,t=(n=this.$attrs,(o=this.componentData)?i(i({},o.props),o.attrs):n);var n,o;return e?(this.transitionMode=function(e){if(!e||1!==e.length)return!1;const[{type:t}]=e;return!!t&&(n=t.name,["transition-group","TransitionGroup"].includes(n));var n}(e),u(this.getTag(),t,e)):u(this.getTag(),t,[])},created(){null!==this.list&&null!==this.modelValue&&Ft.error("list props are mutually exclusive! Please set one.")},mounted(){const e={};Gt.forEach((t=>{e["on"+t]=Jt.call(this,t)})),Zt.forEach((t=>{e["on"+t]=qt.bind(this,t)}));const t=Object.keys(this.$attrs).reduce(((e,t)=>(e[zt(t)]=this.$attrs[t],e)),{}),n=Object.assign({},t,e,{onMove:(e,t)=>this.onDragMove(e,t)});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new St(this.$el,n),this.computeIndexes()},beforeUnmount(){try{void 0!==this._sortable&&this._sortable.destroy()}catch(e){}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(e){this.updateOptions(e)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?d(this.component):this.tag},updateOptions(e){for(var t in e){const n=zt(t);-1===Kt.indexOf(n)&&this._sortable.option(n,e[t])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick((()=>{this.visibleIndexes=function(e,t,n,o){if(!e)return[];const a=Object.values(e),i=t.length-o;return[...t].map(((e,t)=>t>=i?a.length:a.indexOf(e)))}(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)}))},getUnderlyingVm(e){const t=function(e,t){return Object.values(e).indexOf(t)}(this.getChildrenNodes()||[],e);if(-1===t)return null;return{index:t,element:this.realList[t]}},emitChanges(e){this.$nextTick((()=>{this.$emit("change",e)}))},alterList(e){if(this.list)return void e(this.list);const t=[...this.modelValue];e(t),this.$emit("update:modelValue",t)},spliceList(){this.alterList((e=>e.splice(...arguments)))},updatePosition(e,t){this.alterList((n=>n.splice(t,0,n.splice(e,1)[0])))},getVmIndex(e){const t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(e){if(!this.noTransitionOnDrag||!this.transitionMode)return;this.getChildrenNodes()[e].data=null;const t=this.getComponent();t.children=[],t.kept=void 0},onDragStart(e){this.context=this.getUnderlyingVm(e.item),this.context&&(e.item._underlying_vm_=this.clone(this.context.element),Qt=e.item)},onDragAdd(e){const t=e.item._underlying_vm_;if(void 0===t)return;$t(e.item);const n=this.getVmIndex(e.newIndex);this.spliceList(n,0,t),this.computeIndexes();const o={element:t,newIndex:n};this.emitChanges({added:o})},onDragRemove(e){if(Wt(this.$el,e.item,e.oldIndex),"clone"===e.pullMode)return void $t(e.clone);if(!this.context)return;const t=this.context.index;this.spliceList(t,1);const n={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:n})},onDragUpdate(e){$t(e.item),Wt(e.from,e.item,e.oldIndex);const t=this.context.index,n=this.getVmIndex(e.newIndex);this.updatePosition(t,n);const o={element:this.context.element,oldIndex:t,newIndex:n};this.emitChanges({moved:o})},updateProperty(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},onDragMove(e,t){const n=this.move;if(!n||!this.realList)return!0;const o=this.getRelatedContextFromMoveEvent(e),a=this.context,i=this.computeFutureIndex(o,e);Object.assign(a,{futureIndex:i});return n(Object.assign({},e,{relatedContext:o,draggedContext:a}),t)},onDragEnd(){this.computeIndexes(),Qt=null},getRelatedContextFromMoveEvent({to:e,related:t}){const n=this;if(!n)return{component:n};const o=n.realList,a={list:o,component:n};if(e!==t&&o&&n.getUnderlyingVm){const e=n.getUnderlyingVm(t);if(e)return Object.assign(e,a)}return a},computeFutureIndex(e,t){if(!e.element)return 0;const n=[...t.to.children].filter((e=>"none"!==e.style.display)),o=n.indexOf(t.related),a=e.component.getVmIndex(o);return-1!==n.indexOf(Qt)||!t.willInsertAfter?a:a+1}}}),nn=g("div",null,"提示",-1),on=m(" 取消 "),an=m(" 确定 ");var rn=r({props:{showModal:{type:Boolean,required:!0},inputVal:{type:String,required:!0},placeholder:{type:String,required:!0}},emits:["cancelClick","confirmClick","update:inputVal"],setup(e,{emit:t}){const n=e,o=h(),a=p("");f((()=>{a.value=n.inputVal}));const i=()=>{console.log("cancelClick"),t("cancelClick")},r=()=>{a.value?(t("update:inputVal",a.value),setTimeout((()=>{t("confirmClick")}),300)):o.error("请输入内容")};return(e,t)=>{const o=d("n-input"),u=d("n-button"),h=d("n-modal");return l(),s(h,{show:n.showModal,"show-icon":!1,preset:"dialog",title:"Dialog"},{header:v((()=>[nn])),action:v((()=>[g("div",null,[c(u,{class:"mr-4",onClick:i},{default:v((()=>[on])),_:1}),c(u,{type:"error",onClick:r},{default:v((()=>[an])),_:1})])])),default:v((()=>[g("div",null,[c(o,{value:a.value,"onUpdate:value":t[0]||(t[0]=e=>a.value=e),placeholder:n.placeholder},null,8,["value","placeholder"])])])),_:1},8,["show"])}}});const ln=e=>{const t=localStorage.getItem("shootList");if(t){return JSON.parse(t).filter((t=>t.projectId!==e))||[]}return[]},sn=e=>{const t=localStorage.getItem("shootList");if(t){const n=JSON.parse(t).filter((t=>t.projectId===e));if(n)return Promise.resolve(n)}return Promise.resolve([])},cn=async e=>{if(e.id&&e.projectId){const t=await sn(e.projectId),n=t.findIndex((t=>e.id===t.id&&t.projectId===e.projectId));-1===n?t.push(e):t[n]=e;const o=ln(e.projectId);return localStorage.setItem("shootList",JSON.stringify(o.concat(t))),Promise.resolve()}return Promise.reject()};E("data-v-052684fc");const un={class:"\n      flex flex-col\n      items-center\n      w-60\n      bg-gray-100\n      overflow-auto\n      flex-shrink-0\n    "},dn=g("div",{class:"mt-4"},"分镜头列表",-1),hn=["onClick"],pn=m(" 新建分镜头 ");D();var fn=r({emits:["updateSelectedSL"],setup(e,{emit:t}){const n=p([]),o=h(),a=b(),i=y(),r=p(!1),u=p({id:"",name:"",projectId:""}),f=[{label:"重命名",key:"edit"},{label:"删除",key:"delete"}],g=async e=>{r.value=!1,"edit"===e&&await cn(u.value),await P()},E=async()=>{const e={id:V(),projectId:a.query.id+"",name:"第"+(n.value.length+1)+"场"};try{await cn(e),o.success("保存成功"),await P()}catch(t){o.error("保存失败")}},D=async()=>{try{await(async(e,t)=>{const n=ln(t);return localStorage.setItem("shootList",JSON.stringify(n.concat(e))),Promise.resolve()})(n.value,a.query.id+""),await P()}catch(e){o.error("调整顺序失败")}},j=e=>{u.value=e,t("updateSelectedSL",e)},k=async e=>{try{await(async e=>{if(e.id&&e.projectId){const t=await sn(e.projectId),n=t.findIndex((t=>e.id===t.id));if(n>-1){t.splice(n,1);const o=ln(e.projectId);return localStorage.setItem("shootList",JSON.stringify(o.concat(t))),Promise.resolve()}return Promise.reject()}return Promise.reject()})(e),o.success("删除成功"),await P()}catch(t){o.error("删除失败")}},M=async e=>{"edit"===e&&(r.value=!0),"delete"===e&&i.error({title:"提示",content:"是否删除?",positiveText:"确定",showIcon:!1,negativeText:"取消",onPositiveClick:()=>{k(u.value)}})},P=async()=>{try{n.value=await sn(a.query.id+""),n.value.length>0&&j(n.value[0])}catch(e){o.error("获取分镜头列表失败")}};return w((()=>{P()})),(e,t)=>{const o=d("n-icon"),a=d("n-dropdown"),i=d("n-button");return l(),x("div",un,[dn,c(S(tn),{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),onChange:D},{default:v((()=>[c(C,null,{default:v((()=>[(l(!0),x(I,null,T(n.value,((e,t)=>(l(),x("div",{class:O(["sl-aside-item",e.id===u.value.id?"active":""]),key:t,onClick:t=>j(e)},[m(N(e.name||"新建分镜头"+(t+1))+" ",1),c(a,{trigger:"click",onSelect:M,options:f,"show-arrow":!0},{default:v((()=>[c(o,{class:"sl-aside-item-icon"},{default:v((()=>[c(S(R))])),_:1})])),_:1})],10,hn)))),128))])),_:1})])),_:1},8,["modelValue"]),c(i,{class:"mt-4 w-56",onClick:E},{icon:v((()=>[c(o,null,{default:v((()=>[c(S(U))])),_:1})])),default:v((()=>[pn])),_:1}),r.value?(l(),s(rn,{key:0,showModal:r.value,inputVal:u.value.name,"onUpdate:inputVal":t[1]||(t[1]=e=>u.value.name=e),placeholder:"请输入新的名字",onCancelClick:t[2]||(t[2]=e=>g("cancel")),onConfirmClick:t[3]||(t[3]=e=>g("edit"))},null,8,["showModal","inputVal"])):_("v-if",!0)])}}});fn.__scopeId="data-v-052684fc";const vn=e=>{const t=localStorage.getItem("shootDetail");if(t){const n=JSON.parse(t);return Promise.resolve(n.filter((t=>e===t.shootId))||[])}return Promise.resolve([])},gn=e=>{const t=localStorage.getItem("shootDetail")||JSON.stringify([]);return JSON.parse(t).filter((t=>e!==t.shootId))},mn=[{label:"超远景",value:"超远景"},{label:"远景",value:"远景"},{label:"全景",value:"全景"},{label:"中景",value:"中景"},{label:"近景",value:"近景"},{label:"特写",value:"特写"},{label:"大特写",value:"大特写"},{label:"自定义",value:"自定义"}],bn=[{label:"固定",value:"固定"},{label:"推动",value:"推动"},{label:"拉动",value:"拉动"},{label:"摇动",value:"摇动"},{label:"甩动",value:"甩动"},{label:"移动",value:"移动"},{label:"跟拍",value:"跟拍"},{label:"上升",value:"上升"},{label:"下降",value:"下降"}],yn=[{label:"低角度",value:"低角度"},{label:"高角度",value:"高角度"},{label:"俯视角度",value:"俯视角度"},{label:"视线高度",value:"视线高度"},{label:"地面高度",value:"地面高度"}];E("data-v-7e9fd0bd");const wn={class:"p-10 pt-5 flex-auto w-full"},xn={class:"text-3xl pb-5"},Sn=P('<div class="flex items-center h-10 bg-gray-50 text-gray-500 text-sm" data-v-7e9fd0bd><span class="w-20 pl-2" data-v-7e9fd0bd>场次</span><span class="w-20 pl-2" data-v-7e9fd0bd>镜号</span><span class="flex-auto pl-2" data-v-7e9fd0bd>内容描述</span><span class="w-32 pl-4" data-v-7e9fd0bd>景别</span><span class="w-32 pl-4" data-v-7e9fd0bd>镜头类型</span><span class="w-40 pl-4" data-v-7e9fd0bd>机位运动</span><span class="w-40 pl-2" data-v-7e9fd0bd>备注</span><span class="w-32 pl-4" data-v-7e9fd0bd>操作</span></div>',1),_n=["onUpdate:modelValue"],En=["onUpdate:modelValue"],Dn=["onUpdate:modelValue"],Cn={class:"w-32 pl-4"},In={class:"flex items-center cursor-pointer"},Tn={class:"w-32 pl-4"},On={class:"flex items-center cursor-pointer"},Nn={class:"w-40 pl-4"},jn={class:"flex items-center cursor-pointer"},kn=["onUpdate:modelValue"],Mn=["onClick"],Pn={class:"flex items-center h-10 text-gray-500 text-sm text-gray-500"},An={class:"w-32 pl-4"},Ln={class:"flex items-center cursor-pointer"},Vn={class:"w-32 pl-4"},Rn={class:"flex items-center cursor-pointer"},Un={class:"w-40 pl-4"},Xn={class:"flex items-center cursor-pointer"};D();var Bn=r({props:{name:{type:String,required:!0},shootId:{type:String,required:!0}},setup(e){const t=e,n=p(!1),o=h(),a=p([]),i=p({id:"",shootId:"",cc:"",jh:"",nrms:"",jb:"",jwyd:"",bz:""});f((()=>{A((()=>{s(t.shootId)}))})),j((()=>t.shootId),(()=>{s(t.shootId)}));const r=async()=>{try{await(async e=>{const t=gn(e[0].shootId).concat(e);return localStorage.setItem("shootDetail",JSON.stringify(t)),Promise.resolve()})(a.value),await vn(t.shootId)}catch(e){o.error("保存失败")}},s=async e=>{n.value=!0,a.value=await vn(e),setTimeout((()=>{n.value=!1}),800)},u=async()=>{try{if(i.value.id=V(),i.value.shootId=t.shootId,!(i.value.id&&i.value.shootId&&i.value.cc&&i.value.jh&&i.value.nrms&&i.value.jb&&i.value.jwyd))return void o.error("请填写完整分镜头");await(async e=>{const t=localStorage.getItem("shootDetail")||JSON.stringify([]),n=JSON.parse(t);return n.push(e),localStorage.setItem("shootDetail",JSON.stringify(n)),Promise.resolve()})(i.value),i.value={id:"",shootId:"",cc:"",jh:"",nrms:"",jb:"",jwyd:"",bz:""},await s(t.shootId)}catch(e){o.error("保存失败")}},b=async e=>{try{await(async e=>{const t=localStorage.getItem("shootDetail")||JSON.stringify([]),n=JSON.parse(t),o=n.findIndex((t=>t.id===e.id));return-1===o?Promise.reject():(n.splice(o,1),localStorage.setItem("shootDetail",JSON.stringify(n)),Promise.resolve())})(e),o.success("删除成功"),await s(t.shootId)}catch(n){o.error("删除失败")}};return(e,n)=>{const o=d("n-icon"),s=d("n-popselect");return l(),x("div",wn,[g("div",xn,N(t.name),1),g("div",null,[Sn,(l(!0),x(I,null,T(a.value,((e,t)=>(l(),x("div",{class:"\n          flex\n          items-center\n          w-full\n          h-10\n          text-gray-500 text-sm text-gray-500\n        ",key:t},[k(g("input",{class:"input w-20 h-10","onUpdate:modelValue":t=>e.cc=t,type:"text",onBlur:r,placeholder:"场次"},null,40,_n),[[M,e.cc]]),k(g("input",{class:"input w-20 h-10","onUpdate:modelValue":t=>e.jh=t,type:"text",onBlur:r,placeholder:"镜号"},null,40,En),[[M,e.jh]]),k(g("input",{class:"input flex-auto","onUpdate:modelValue":t=>e.nrms=t,type:"text",onBlur:r,placeholder:"请输入内容描述"},null,40,Dn),[[M,e.nrms]]),g("div",Cn,[c(s,{options:S(mn),value:e.jb,"onUpdate:value":[t=>e.jb=t,r],trigger:"click",scrollable:""},{default:v((()=>[g("div",In,[m(N(e.jb||"景别")+" ",1),c(o,null,{default:v((()=>[c(S(Y))])),_:1})])])),_:2},1032,["options","value","onUpdate:value"])]),g("div",Tn,[c(s,{options:S(yn),value:e.jtlx,"onUpdate:value":[t=>e.jtlx=t,r],trigger:"click",scrollable:""},{default:v((()=>[g("div",On,[m(N(e.jtlx||"镜头类型")+" ",1),c(o,null,{default:v((()=>[c(S(Y))])),_:1})])])),_:2},1032,["options","value","onUpdate:value"])]),g("div",Nn,[c(s,{options:S(bn),value:e.jwyd,"onUpdate:value":[t=>e.jwyd=t,r],trigger:"click",scrollable:""},{default:v((()=>[g("div",jn,[m(N(e.jwyd||"机位运动")+" ",1),c(o,null,{default:v((()=>[c(S(Y))])),_:1})])])),_:2},1032,["options","value","onUpdate:value"])]),k(g("input",{class:"input w-40","onUpdate:modelValue":t=>e.bz=t,type:"text",onBlur:r,placeholder:"请输入内容描述"},null,40,kn),[[M,e.bz]]),g("span",{class:"w-32 pl-4 cursor-pointer underline text-red-700",onClick:t=>b(e)}," 删除 ",8,Mn)])))),128)),g("div",Pn,[k(g("input",{class:"input w-20 h-10","onUpdate:modelValue":n[0]||(n[0]=e=>i.value.cc=e),type:"text",placeholder:"场次"},null,512),[[M,i.value.cc]]),k(g("input",{class:"input w-20 h-10","onUpdate:modelValue":n[1]||(n[1]=e=>i.value.jh=e),type:"text",placeholder:"镜号"},null,512),[[M,i.value.jh]]),k(g("input",{class:"input flex-auto","onUpdate:modelValue":n[2]||(n[2]=e=>i.value.nrms=e),type:"text",placeholder:"请输入内容描述"},null,512),[[M,i.value.nrms]]),g("div",An,[c(s,{options:S(mn),value:i.value.jb,"onUpdate:value":n[3]||(n[3]=e=>i.value.jb=e),trigger:"click",scrollable:""},{default:v((()=>[g("div",Ln,[m(N(i.value.jb||"景别")+" ",1),c(o,null,{default:v((()=>[c(S(Y))])),_:1})])])),_:1},8,["options","value"])]),g("div",Vn,[c(s,{options:S(yn),value:i.value.jtlx,"onUpdate:value":n[4]||(n[4]=e=>i.value.jtlx=e),trigger:"click",scrollable:""},{default:v((()=>[g("div",Rn,[m(N(i.value.jtlx||"镜头类型")+" ",1),c(o,null,{default:v((()=>[c(S(Y))])),_:1})])])),_:1},8,["options","value"])]),g("div",Un,[c(s,{options:S(bn),value:i.value.jwyd,"onUpdate:value":n[5]||(n[5]=e=>i.value.jwyd=e),trigger:"click",scrollable:""},{default:v((()=>[g("div",Xn,[m(N(i.value.jwyd||"机位运动")+" ",1),c(o,null,{default:v((()=>[c(S(Y))])),_:1})])])),_:1},8,["options","value"])]),k(g("input",{class:"input w-40","onUpdate:modelValue":n[6]||(n[6]=e=>i.value.bz=e),type:"text",placeholder:"请输入内容描述"},null,512),[[M,i.value.bz]]),g("div",{class:"w-32 pl-4 cursor-pointer underline text-green-700",onClick:u}," 添加 ")])])])}}});Bn.__scopeId="data-v-7e9fd0bd",E("data-v-2524e697");const Yn={class:"\n        w-full\n        h-16\n        border-b border-solid border-gray-100\n        flex\n        items-center\n        px-10\n        justify-between\n      "},Fn=m(" 所有项目 "),Hn=m(" 分镜头列表 "),zn=m("打印预览"),$n=m("分享"),Wn={class:"sl-content flex"};D();var qn=r({setup(e){const t=b(),n=L(),o=p(!1),a=p({id:"",name:"",projectId:""}),i=e=>{a.value=e},r=()=>{n.push({name:"ProjectHome"})},u=()=>{n.go(-1)};return(e,n)=>{const h=d("n-breadcrumb-item"),p=d("n-breadcrumb"),f=d("n-button"),b=d("n-space"),y=d("n-spin");return l(),s(y,{show:o.value},{default:v((()=>[g("div",Yn,[c(p,null,{default:v((()=>[c(h,{onClick:r},{default:v((()=>[Fn])),_:1}),c(h,{onClick:u},{default:v((()=>[m(N(S(t).query.name),1)])),_:1}),c(h,null,{default:v((()=>[Hn])),_:1})])),_:1}),c(b,null,{default:v((()=>[c(f,null,{default:v((()=>[zn])),_:1}),c(f,null,{default:v((()=>[$n])),_:1})])),_:1})]),g("div",Wn,[c(fn,{onUpdateSelectedSL:i}),a.value.id?(l(),s(Bn,{key:0,shootId:a.value.id,name:a.value.name},null,8,["shootId","name"])):_("v-if",!0)])])),_:1},8,["show"])}}});qn.__scopeId="data-v-2524e697";export{qn as default};
