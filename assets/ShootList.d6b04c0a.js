var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,a=(e,a)=>{for(var r in a||(a={}))n.call(a,r)&&i(e,r,a[r]);if(t)for(var r of t(a))o.call(a,r)&&i(e,r,a[r]);return e};import{d as r,o as l,c as s,a as c,s as u,r as d,u as h,h as p,t as f,w as v,j as g,l as m,q as b,v as y,m as w,i as x,A as S,y as _,p as E,k as D,T as C,F as I,B as T,E as O,x as N,C as M,H as P,g as k}from"./vendor.8c64f2f4.js";import{g as j,E as A,A as L}from"./uuid.bf9ef7e4.js";const R={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},X=c("path",{d:"M64 144l192 224l192-224H64z",fill:"currentColor"},null,-1);var Y=r({name:"CaretDownSharp",render:function(e,t){return l(),s("svg",R,[X])}});
/*!
  * vue-draggable-next v2.0.0
  * (c) 2021 Anish George
  * @license MIT
  */
/**!
 * Sortable 1.13.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){V(e,t,n[t])}))}return e}function H(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function z(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var $=z(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),W=z(/Edge/i),q=z(/firefox/i),J=z(/safari/i)&&!z(/chrome/i)&&!z(/android/i),G=z(/iP(ad|od|hone)/i),Z=z(/chrome/i)&&z(/android/i),K={capture:!1,passive:!1};function Q(e,t,n){e.addEventListener(t,n,!$&&K)}function ee(e,t,n){e.removeEventListener(t,n,!$&&K)}function te(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function ne(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function oe(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&te(e,t):te(e,t))||o&&e===n)return e;if(e===n)break}while(e=ne(e))}return null}var ie,ae=/\s+/g;function re(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(ae," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(ae," ")}}function le(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function se(e,t){var n="";if("string"==typeof e)n=e;else do{var o=le(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function ce(e,t,n){if(e){var o=e.getElementsByTagName(t),i=0,a=o.length;if(n)for(;i<a;i++)n(o[i],i);return o}return[]}function ue(){var e=document.scrollingElement;return e||document.documentElement}function de(e,t,n,o,i){if(e.getBoundingClientRect||e===window){var a,r,l,s,c,u,d;if(e!==window&&e.parentNode&&e!==ue()?(r=(a=e.getBoundingClientRect()).top,l=a.left,s=a.bottom,c=a.right,u=a.height,d=a.width):(r=0,l=0,s=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!$))do{if(i&&i.getBoundingClientRect&&("none"!==le(i,"transform")||n&&"static"!==le(i,"position"))){var h=i.getBoundingClientRect();r-=h.top+parseInt(le(i,"border-top-width")),l-=h.left+parseInt(le(i,"border-left-width")),s=r+a.height,c=l+a.width;break}}while(i=i.parentNode);if(o&&e!==window){var p=se(i||e),f=p&&p.a,v=p&&p.d;p&&(s=(r/=v)+(u/=v),c=(l/=f)+(d/=f))}return{top:r,left:l,bottom:s,right:c,width:d,height:u}}}function he(e,t,n){for(var o=me(e,!0),i=de(e)[t];o;){var a=de(o)[n];if(!("top"===n||"left"===n?i>=a:i<=a))return o;if(o===ue())break;o=me(o,!1)}return!1}function pe(e,t,n){for(var o=0,i=0,a=e.children;i<a.length;){if("none"!==a[i].style.display&&a[i]!==yt.ghost&&a[i]!==yt.dragged&&oe(a[i],n.draggable,e,!1)){if(o===t)return a[i];o++}i++}return null}function fe(e,t){for(var n=e.lastElementChild;n&&(n===yt.ghost||"none"===le(n,"display")||t&&!te(n,t));)n=n.previousElementSibling;return n||null}function ve(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===yt.clone||t&&!te(e,t)||n++;return n}function ge(e){var t=0,n=0,o=ue();if(e)do{var i=se(e),a=i.a,r=i.d;t+=e.scrollLeft*a,n+=e.scrollTop*r}while(e!==o&&(e=e.parentNode));return[t,n]}function me(e,t){if(!e||!e.getBoundingClientRect)return ue();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=le(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return ue();if(o||t)return n;o=!0}}}while(n=n.parentNode);return ue()}function be(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function ye(e,t){return function(){if(!ie){var n=arguments,o=this;1===n.length?e.call(o,n[0]):e.apply(o,n),ie=setTimeout((function(){ie=void 0}),t)}}}function we(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function xe(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var Se="Sortable"+(new Date).getTime();function _e(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==le(e,"display")&&e!==yt.ghost){t.push({target:e,rect:de(e)});var n=U({},t[t.length-1].rect);if(e.thisAnimationDuration){var o=se(e,!0);o&&(n.top-=o.f,n.left-=o.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var o=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var i=!1,a=0;t.forEach((function(e){var t=0,n=e.target,r=n.fromRect,l=de(n),s=n.prevFromRect,c=n.prevToRect,u=e.rect,d=se(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&be(s,l)&&!be(r,l)&&(u.top-l.top)/(u.left-l.left)==(r.top-l.top)/(r.left-l.left)&&(t=function(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}(u,s,c,o.options)),be(l,r)||(n.prevFromRect=r,n.prevToRect=l,t||(t=o.options.animation),o.animate(n,u,l,t)),t&&(i=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"==typeof n&&n()}),a):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,o){if(o){le(e,"transition",""),le(e,"transform","");var i=se(this.el),a=i&&i.a,r=i&&i.d,l=(t.left-n.left)/(a||1),s=(t.top-n.top)/(r||1);e.animatingX=!!l,e.animatingY=!!s,le(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),le(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),le(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){le(e,"transition",""),le(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}}var Ee=[],De={initializeByDefault:!0},Ce={mount:function(e){for(var t in De)De.hasOwnProperty(t)&&!(t in e)&&(e[t]=De[t]);Ee.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),Ee.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var i=e+"Global";Ee.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][i]&&t[o.pluginName][i](U({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](U({sortable:t},n)))}))},initializePlugins:function(e,t,n,o){for(var i in Ee.forEach((function(o){var i=o.pluginName;if(e.options[i]||o.initializeByDefault){var a=new o(e,t,e.options);a.sortable=e,a.options=e.options,e[i]=a,B(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);void 0!==a&&(e.options[i]=a)}},getEventProperties:function(e,t){var n={};return Ee.forEach((function(o){"function"==typeof o.eventProperties&&B(n,o.eventProperties.call(t[o.pluginName],e))})),n},modifyOption:function(e,t,n){var o;return Ee.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[t]&&(o=i.optionListeners[t].call(e[i.pluginName],n))})),o}};var Ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.evt,i=H(n,["evt"]);Ce.pluginEvent.bind(yt)(e,t,U({dragEl:Oe,parentEl:Ne,ghostEl:Me,rootEl:Pe,nextEl:ke,lastDownEl:je,cloneEl:Ae,cloneHidden:Le,dragStarted:Je,putSortable:Be,activeSortable:yt.active,originalEvent:o,oldIndex:Re,oldDraggableIndex:Ye,newIndex:Xe,newDraggableIndex:Fe,hideGhostForTarget:vt,unhideGhostForTarget:gt,cloneNowHidden:function(){Le=!0},cloneNowShown:function(){Le=!1},dispatchSortableEvent:function(e){Te({sortable:t,name:e,originalEvent:o})}},i))};function Te(e){!function(e){var t=e.sortable,n=e.rootEl,o=e.name,i=e.targetEl,a=e.cloneEl,r=e.toEl,l=e.fromEl,s=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,h=e.originalEvent,p=e.putSortable,f=e.extraEventProperties;if(t=t||n&&n[Se]){var v,g=t.options,m="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||$||W?(v=document.createEvent("Event")).initEvent(o,!0,!0):v=new CustomEvent(o,{bubbles:!0,cancelable:!0}),v.to=r||n,v.from=l||n,v.item=i||n,v.clone=a,v.oldIndex=s,v.newIndex=c,v.oldDraggableIndex=u,v.newDraggableIndex=d,v.originalEvent=h,v.pullMode=p?p.lastPutMode:void 0;var b=U({},f,Ce.getEventProperties(o,t));for(var y in b)v[y]=b[y];n&&n.dispatchEvent(v),g[m]&&g[m].call(t,v)}}(U({putSortable:Be,cloneEl:Ae,targetEl:Oe,rootEl:Pe,oldIndex:Re,oldDraggableIndex:Ye,newIndex:Xe,newDraggableIndex:Fe},e))}var Oe,Ne,Me,Pe,ke,je,Ae,Le,Re,Xe,Ye,Fe,Ve,Be,Ue,He,ze,$e,We,qe,Je,Ge,Ze,Ke,Qe,et=!1,tt=!1,nt=[],ot=!1,it=!1,at=[],rt=!1,lt=[],st="undefined"!=typeof document,ct=G,ut=W||$?"cssFloat":"float",dt=st&&!Z&&!G&&"draggable"in document.createElement("div"),ht=function(){if(st){if($)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),pt=function(e,t){var n=le(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=pe(e,0,t),a=pe(e,1,t),r=i&&le(i),l=a&&le(a),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+de(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+de(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&r.float&&"none"!==r.float){var u="left"===r.float?"left":"right";return!a||"both"!==l.clear&&l.clear!==u?"horizontal":"vertical"}return i&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s>=o&&"none"===n[ut]||a&&"none"===n[ut]&&s+c>o)?"vertical":"horizontal"},ft=function(e){function t(e,n){return function(o,i,a,r){var l=o.options.group.name&&i.options.group.name&&o.options.group.name===i.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(o,i,a,r),n)(o,i,a,r);var s=(n?o:i).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},o=e.group;o&&"object"==F(o)||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},vt=function(){!ht&&Me&&le(Me,"display","none")},gt=function(){!ht&&Me&&le(Me,"display","")};st&&document.addEventListener("click",(function(e){if(tt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),tt=!1,!1}),!0);var mt=function(e){if(Oe){e=e.touches?e.touches[0]:e;var t=(i=e.clientX,a=e.clientY,nt.some((function(e){if(!fe(e)){var t=de(e),n=e[Se].options.emptyInsertThreshold,o=i>=t.left-n&&i<=t.right+n,l=a>=t.top-n&&a<=t.bottom+n;return n&&o&&l?r=e:void 0}})),r);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Se]._onDragOver(n)}}var i,a,r},bt=function(e){Oe&&Oe.parentNode[Se]._isOutsideThisEl(e.target)};function yt(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=B({},t),e[Se]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==yt.supportPointer&&"PointerEvent"in window&&!J,emptyInsertThreshold:5};for(var o in Ce.initializePlugins(this,e,n),n)!(o in t)&&(t[o]=n[o]);for(var i in ft(t),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&dt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Q(e,"pointerdown",this._onTapStart):(Q(e,"mousedown",this._onTapStart),Q(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Q(e,"dragover",this),Q(e,"dragenter",this)),nt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),B(this,_e())}function wt(e,t,n,o,i,a,r,l){var s,c,u=e[Se],d=u.options.onMove;return!window.CustomEvent||$||W?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=o,s.related=i||t,s.relatedRect=a||de(t),s.willInsertAfter=l,s.originalEvent=r,e.dispatchEvent(s),d&&(c=d.call(u,s,r)),c}function xt(e){e.draggable=!1}function St(){rt=!1}function _t(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function Et(e){return setTimeout(e,0)}function Dt(e){return clearTimeout(e)}yt.prototype={constructor:yt,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Ge=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Oe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,i=o.preventOnFilter,a=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(function(e){lt.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var o=t[n];o.checked&&lt.push(o)}}(n),!Oe&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||o.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!J||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=oe(l,o.draggable,n,!1))&&l.animated||je===l)){if(Re=ve(l),Ye=ve(l,o.draggable),"function"==typeof c){if(c.call(this,e,l,this))return Te({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),Ie("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(o){if(o=oe(s,o.trim(),n,!1))return Te({sortable:t,rootEl:o,name:"filter",targetEl:l,fromEl:n,toEl:n}),Ie("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());o.handle&&!oe(s,o.handle,n,!1)||this._prepareDragStart(e,r,l)}}},_prepareDragStart:function(e,t,n){var o,i=this,a=i.el,r=i.options,l=a.ownerDocument;if(n&&!Oe&&n.parentNode===a){var s=de(n);if(Pe=a,Ne=(Oe=n).parentNode,ke=Oe.nextSibling,je=n,Ve=r.group,yt.dragged=Oe,Ue={target:Oe,clientX:(t||e).clientX,clientY:(t||e).clientY},We=Ue.clientX-s.left,qe=Ue.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Oe.style["will-change"]="all",o=function(){Ie("delayEnded",i,{evt:e}),yt.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!q&&i.nativeDraggable&&(Oe.draggable=!0),i._triggerDragStart(e,t),Te({sortable:i,name:"choose",originalEvent:e}),re(Oe,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){ce(Oe,e.trim(),xt)})),Q(l,"dragover",mt),Q(l,"mousemove",mt),Q(l,"touchmove",mt),Q(l,"mouseup",i._onDrop),Q(l,"touchend",i._onDrop),Q(l,"touchcancel",i._onDrop),q&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Oe.draggable=!0),Ie("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(W||$))o();else{if(yt.eventCanceled)return void this._onDrop();Q(l,"mouseup",i._disableDelayedDrag),Q(l,"touchend",i._disableDelayedDrag),Q(l,"touchcancel",i._disableDelayedDrag),Q(l,"mousemove",i._delayedDragTouchMoveHandler),Q(l,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&Q(l,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(o,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Oe&&xt(Oe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ee(e,"mouseup",this._disableDelayedDrag),ee(e,"touchend",this._disableDelayedDrag),ee(e,"touchcancel",this._disableDelayedDrag),ee(e,"mousemove",this._delayedDragTouchMoveHandler),ee(e,"touchmove",this._delayedDragTouchMoveHandler),ee(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?Q(document,"pointermove",this._onTouchMove):Q(document,t?"touchmove":"mousemove",this._onTouchMove):(Q(Oe,"dragend",this),Q(Pe,"dragstart",this._onDragStart));try{document.selection?Et((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(et=!1,Pe&&Oe){Ie("dragStarted",this,{evt:t}),this.nativeDraggable&&Q(document,"dragover",bt);var n=this.options;!e&&re(Oe,n.dragClass,!1),re(Oe,n.ghostClass,!0),yt.active=this,e&&this._appendGhost(),Te({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(He){this._lastX=He.clientX,this._lastY=He.clientY,vt();for(var e=document.elementFromPoint(He.clientX,He.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(He.clientX,He.clientY))!==t;)t=e;if(Oe.parentNode[Se]._isOutsideThisEl(e),t)do{if(t[Se]){if(t[Se]._onDragOver({clientX:He.clientX,clientY:He.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);gt()}},_onTouchMove:function(e){if(Ue){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=Me&&se(Me,!0),r=Me&&a&&a.a,l=Me&&a&&a.d,s=ct&&Qe&&ge(Qe),c=(i.clientX-Ue.clientX+o.x)/(r||1)+(s?s[0]-at[0]:0)/(r||1),u=(i.clientY-Ue.clientY+o.y)/(l||1)+(s?s[1]-at[1]:0)/(l||1);if(!yt.active&&!et){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Me){a?(a.e+=c-(ze||0),a.f+=u-($e||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");le(Me,"webkitTransform",d),le(Me,"mozTransform",d),le(Me,"msTransform",d),le(Me,"transform",d),ze=c,$e=u,He=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Me){var e=this.options.fallbackOnBody?document.body:Pe,t=de(Oe,!0,ct,!0,e),n=this.options;if(ct){for(Qe=e;"static"===le(Qe,"position")&&"none"===le(Qe,"transform")&&Qe!==document;)Qe=Qe.parentNode;Qe!==document.body&&Qe!==document.documentElement?(Qe===document&&(Qe=ue()),t.top+=Qe.scrollTop,t.left+=Qe.scrollLeft):Qe=ue(),at=ge(Qe)}re(Me=Oe.cloneNode(!0),n.ghostClass,!1),re(Me,n.fallbackClass,!0),re(Me,n.dragClass,!0),le(Me,"transition",""),le(Me,"transform",""),le(Me,"box-sizing","border-box"),le(Me,"margin",0),le(Me,"top",t.top),le(Me,"left",t.left),le(Me,"width",t.width),le(Me,"height",t.height),le(Me,"opacity","0.8"),le(Me,"position",ct?"absolute":"fixed"),le(Me,"zIndex","100000"),le(Me,"pointerEvents","none"),yt.ghost=Me,e.appendChild(Me),le(Me,"transform-origin",We/parseInt(Me.style.width)*100+"% "+qe/parseInt(Me.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,i=n.options;Ie("dragStart",this,{evt:e}),yt.eventCanceled?this._onDrop():(Ie("setupClone",this),yt.eventCanceled||((Ae=xe(Oe)).draggable=!1,Ae.style["will-change"]="",this._hideClone(),re(Ae,this.options.chosenClass,!1),yt.clone=Ae),n.cloneId=Et((function(){Ie("clone",n),yt.eventCanceled||(n.options.removeCloneOnHide||Pe.insertBefore(Ae,Oe),n._hideClone(),Te({sortable:n,name:"clone"}))})),!t&&re(Oe,i.dragClass,!0),t?(tt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ee(document,"mouseup",n._onDrop),ee(document,"touchend",n._onDrop),ee(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(n,o,Oe)),Q(document,"drop",n),le(Oe,"transform","translateZ(0)")),et=!0,n._dragStartId=Et(n._dragStarted.bind(n,t,e)),Q(document,"selectstart",n),Je=!0,J&&le(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,o,i,a=this.el,r=e.target,l=this.options,s=l.group,c=yt.active,u=Ve===s,d=l.sort,h=Be||c,p=this,f=!1;if(!rt){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=oe(r,l.draggable,a,!0),T("dragOver"),yt.eventCanceled)return f;if(Oe.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return N(!1);if(tt=!1,c&&!l.disabled&&(u?d||(o=!Pe.contains(Oe)):Be===this||(this.lastPutMode=Ve.checkPull(this,c,Oe,e))&&s.checkPut(this,c,Oe,e))){if(i="vertical"===this._getDirection(e,r),t=de(Oe),T("dragOverValid"),yt.eventCanceled)return f;if(o)return Ne=Pe,O(),this._hideClone(),T("revert"),yt.eventCanceled||(ke?Pe.insertBefore(Oe,ke):Pe.appendChild(Oe)),N(!0);var v=fe(a,l.draggable);if(!v||function(e,t,n){var o=de(fe(n.el,n.options.draggable)),i=10;return t?e.clientX>o.right+i||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+i}(e,i,this)&&!v.animated){if(v===Oe)return N(!1);if(v&&a===e.target&&(r=v),r&&(n=de(r)),!1!==wt(Pe,a,Oe,t,r,n,e,!!r))return O(),a.appendChild(Oe),Ne=a,M(),N(!0)}else if(r.parentNode===a){n=de(r);var g,m,b,y=Oe.parentNode!==a,w=!function(e,t,n){var o=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,r=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return o===r||i===l||o+a/2===r+s/2}(Oe.animated&&Oe.toRect||t,r.animated&&r.toRect||n,i),x=i?"top":"left",S=he(r,"top","top")||he(Oe,"top","top"),_=S?S.scrollTop:void 0;if(Ge!==r&&(m=n[x],ot=!1,it=!w&&l.invertSwap||y),0!==(g=function(e,t,n,o,i,a,r,l){var s=o?e.clientY:e.clientX,c=o?n.height:n.width,u=o?n.top:n.left,d=o?n.bottom:n.right,h=!1;if(!r)if(l&&Ke<c*i){if(!ot&&(1===Ze?s>u+c*a/2:s<d-c*a/2)&&(ot=!0),ot)h=!0;else if(1===Ze?s<u+Ke:s>d-Ke)return-Ze}else if(s>u+c*(1-i)/2&&s<d-c*(1-i)/2)return function(e){return ve(Oe)<ve(e)?1:-1}(t);if((h=h||r)&&(s<u+c*a/2||s>d-c*a/2))return s>u+c/2?1:-1;return 0}(e,r,n,i,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,it,Ge===r))){var E=ve(Oe);do{E-=g,b=Ne.children[E]}while(b&&("none"===le(b,"display")||b===Me))}if(0===g||b===r)return N(!1);Ge=r,Ze=g;var D=r.nextElementSibling,C=!1,I=wt(Pe,a,Oe,t,r,n,e,C=1===g);if(!1!==I)return 1!==I&&-1!==I||(C=1===I),rt=!0,setTimeout(St,30),O(),C&&!D?a.appendChild(Oe):r.parentNode.insertBefore(Oe,C?D:r),S&&we(S,0,_-S.scrollTop),Ne=Oe.parentNode,void 0===m||it||(Ke=Math.abs(m-de(r)[x])),M(),N(!0)}if(a.contains(Oe))return N(!1)}return!1}function T(l,s){Ie(l,p,U({evt:e,isOwner:u,axis:i?"vertical":"horizontal",revert:o,dragRect:t,targetRect:n,canSort:d,fromSortable:h,target:r,completed:N,onMove:function(n,o){return wt(Pe,a,Oe,t,n,de(n),e,o)},changed:M},s))}function O(){T("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function N(t){return T("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(p),p!==h&&(re(Oe,Be?Be.options.ghostClass:c.options.ghostClass,!1),re(Oe,l.ghostClass,!0)),Be!==p&&p!==yt.active?Be=p:p===yt.active&&Be&&(Be=null),h===p&&(p._ignoreWhileAnimating=r),p.animateAll((function(){T("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(r===Oe&&!Oe.animated||r===a&&!r.animated)&&(Ge=null),l.dragoverBubble||e.rootEl||r===document||(Oe.parentNode[Se]._isOutsideThisEl(e.target),!t&&mt(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),f=!0}function M(){Xe=ve(Oe),Fe=ve(Oe,l.draggable),Te({sortable:p,name:"change",toEl:a,newIndex:Xe,newDraggableIndex:Fe,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){ee(document,"mousemove",this._onTouchMove),ee(document,"touchmove",this._onTouchMove),ee(document,"pointermove",this._onTouchMove),ee(document,"dragover",mt),ee(document,"mousemove",mt),ee(document,"touchmove",mt)},_offUpEvents:function(){var e=this.el.ownerDocument;ee(e,"mouseup",this._onDrop),ee(e,"touchend",this._onDrop),ee(e,"pointerup",this._onDrop),ee(e,"touchcancel",this._onDrop),ee(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;Xe=ve(Oe),Fe=ve(Oe,n.draggable),Ie("drop",this,{evt:e}),Ne=Oe&&Oe.parentNode,Xe=ve(Oe),Fe=ve(Oe,n.draggable),yt.eventCanceled||(et=!1,it=!1,ot=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Dt(this.cloneId),Dt(this._dragStartId),this.nativeDraggable&&(ee(document,"drop",this),ee(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),J&&le(document.body,"user-select",""),le(Oe,"transform",""),e&&(Je&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Me&&Me.parentNode&&Me.parentNode.removeChild(Me),(Pe===Ne||Be&&"clone"!==Be.lastPutMode)&&Ae&&Ae.parentNode&&Ae.parentNode.removeChild(Ae),Oe&&(this.nativeDraggable&&ee(Oe,"dragend",this),xt(Oe),Oe.style["will-change"]="",Je&&!et&&re(Oe,Be?Be.options.ghostClass:this.options.ghostClass,!1),re(Oe,this.options.chosenClass,!1),Te({sortable:this,name:"unchoose",toEl:Ne,newIndex:null,newDraggableIndex:null,originalEvent:e}),Pe!==Ne?(Xe>=0&&(Te({rootEl:Ne,name:"add",toEl:Ne,fromEl:Pe,originalEvent:e}),Te({sortable:this,name:"remove",toEl:Ne,originalEvent:e}),Te({rootEl:Ne,name:"sort",toEl:Ne,fromEl:Pe,originalEvent:e}),Te({sortable:this,name:"sort",toEl:Ne,originalEvent:e})),Be&&Be.save()):Xe!==Re&&Xe>=0&&(Te({sortable:this,name:"update",toEl:Ne,originalEvent:e}),Te({sortable:this,name:"sort",toEl:Ne,originalEvent:e})),yt.active&&(null!=Xe&&-1!==Xe||(Xe=Re,Fe=Ye),Te({sortable:this,name:"end",toEl:Ne,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Ie("nulling",this),Pe=Oe=Ne=Me=ke=Ae=je=Le=Ue=He=Je=Xe=Fe=Re=Ye=Ge=Ze=Be=Ve=yt.dragged=yt.ghost=yt.clone=yt.active=null,lt.forEach((function(e){e.checked=!0})),lt.length=ze=$e=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Oe&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,i=n.length,a=this.options;o<i;o++)oe(e=n[o],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||_t(e));return t},sort:function(e,t){var n={},o=this.el;this.toArray().forEach((function(e,t){var i=o.children[t];oe(i,this.options.draggable,o,!1)&&(n[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(o.removeChild(n[e]),o.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return oe(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=Ce.modifyOption(this,e,t);n[e]=void 0!==o?o:t,"group"===e&&ft(n)},destroy:function(){Ie("destroy",this);var e=this.el;e[Se]=null,ee(e,"mousedown",this._onTapStart),ee(e,"touchstart",this._onTapStart),ee(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ee(e,"dragover",this),ee(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),nt.splice(nt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Le){if(Ie("hideClone",this),yt.eventCanceled)return;le(Ae,"display","none"),this.options.removeCloneOnHide&&Ae.parentNode&&Ae.parentNode.removeChild(Ae),Le=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Le){if(Ie("showClone",this),yt.eventCanceled)return;Oe.parentNode!=Pe||this.options.group.revertClone?ke?Pe.insertBefore(Ae,ke):Pe.appendChild(Ae):Pe.insertBefore(Ae,Oe),this.options.group.revertClone&&this.animate(Oe,Ae),le(Ae,"display",""),Le=!1}}else this._hideClone()}},st&&Q(document,"touchmove",(function(e){(yt.active||et)&&e.cancelable&&e.preventDefault()})),yt.utils={on:Q,off:ee,css:le,find:ce,is:function(e,t){return!!oe(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:ye,closest:oe,toggleClass:re,clone:xe,index:ve,nextTick:Et,cancelNextTick:Dt,detectDirection:pt,getChild:pe},yt.get=function(e){return e[Se]},yt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(yt.utils=U({},yt.utils,e.utils)),Ce.mount(e)}))},yt.create=function(e,t){return new yt(e,t)},yt.version="1.13.0";var Ct,It,Tt,Ot,Nt,Mt,Pt=[],kt=!1;function jt(){Pt.forEach((function(e){clearInterval(e.pid)})),Pt=[]}function At(){clearInterval(Mt)}var Lt=ye((function(e,t,n,o){if(t.scroll){var i,a=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=ue(),u=!1;It!==n&&(It=n,jt(),Ct=t.scroll,i=t.scrollFn,!0===Ct&&(Ct=me(n,!0)));var d=0,h=Ct;do{var p=h,f=de(p),v=f.top,g=f.bottom,m=f.left,b=f.right,y=f.width,w=f.height,x=void 0,S=void 0,_=p.scrollWidth,E=p.scrollHeight,D=le(p),C=p.scrollLeft,I=p.scrollTop;p===c?(x=y<_&&("auto"===D.overflowX||"scroll"===D.overflowX||"visible"===D.overflowX),S=w<E&&("auto"===D.overflowY||"scroll"===D.overflowY||"visible"===D.overflowY)):(x=y<_&&("auto"===D.overflowX||"scroll"===D.overflowX),S=w<E&&("auto"===D.overflowY||"scroll"===D.overflowY));var T=x&&(Math.abs(b-a)<=l&&C+y<_)-(Math.abs(m-a)<=l&&!!C),O=S&&(Math.abs(g-r)<=l&&I+w<E)-(Math.abs(v-r)<=l&&!!I);if(!Pt[d])for(var N=0;N<=d;N++)Pt[N]||(Pt[N]={});Pt[d].vx==T&&Pt[d].vy==O&&Pt[d].el===p||(Pt[d].el=p,Pt[d].vx=T,Pt[d].vy=O,clearInterval(Pt[d].pid),0==T&&0==O||(u=!0,Pt[d].pid=setInterval(function(){o&&0===this.layer&&yt.active._onTouchMove(Nt);var t=Pt[this.layer].vy?Pt[this.layer].vy*s:0,n=Pt[this.layer].vx?Pt[this.layer].vx*s:0;"function"==typeof i&&"continue"!==i.call(yt.dragged.parentNode[Se],n,t,e,Nt,Pt[this.layer].el)||we(Pt[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=me(h,!1)));kt=u}}),30),Rt=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,r=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||i;r();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);l(),s&&!s.el.contains(u)&&(a("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function Xt(){}function Yt(){}Xt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=pe(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Rt},B(Xt,{pluginName:"revertOnSpill"}),Yt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Rt},B(Yt,{pluginName:"removeOnSpill"}),yt.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Q(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Q(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Q(document,"touchmove",this._handleFallbackAutoScroll):Q(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?ee(document,"dragover",this._handleAutoScroll):(ee(document,"pointermove",this._handleFallbackAutoScroll),ee(document,"touchmove",this._handleFallbackAutoScroll),ee(document,"mousemove",this._handleFallbackAutoScroll)),At(),jt(),clearTimeout(ie),ie=void 0},nulling:function(){Nt=It=Ct=kt=Mt=Tt=Ot=null,Pt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,o=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(o,i);if(Nt=e,t||W||$||J){Lt(e,this.options,a,t);var r=me(a,!0);!kt||Mt&&o===Tt&&i===Ot||(Mt&&At(),Mt=setInterval((function(){var a=me(document.elementFromPoint(o,i),!0);a!==r&&(r=a,jt()),Lt(e,n.options,a,t)}),10),Tt=o,Ot=i)}else{if(!this.options.bubbleScroll||me(a,!0)===ue())return void jt();Lt(e,this.options,me(a,!1),!1)}}},B(e,{pluginName:"scroll",initializeByDefault:!0})}),yt.mount(Yt,Xt);const Ft="undefined"!=typeof window?window.console:global.console;const Vt=/-(\w)/g,Bt=function(e){const t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}((e=>e.replace(Vt,((e,t)=>t?t.toUpperCase():""))));function Ut(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function Ht(e,t,n){const o=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,o)}function zt(e,t){this.$nextTick((()=>this.$emit(e.toLowerCase(),t)))}function $t(e){return t=>{null!==this.realList&&this["onDrag"+e](t),zt.call(this,e,t)}}const Wt=["Start","Add","Remove","Update","End"],qt=["Choose","Unchoose","Sort","Filter","Clone"],Jt=["Move",...Wt,...qt].map((e=>"on"+e));let Gt=null;const Zt={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:e=>e},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},Kt=r({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...Wt.map((e=>e.toLowerCase())),...qt.map((e=>e.toLowerCase()))],props:Zt,data:()=>({transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}),render(){const e=this.$slots.default?this.$slots.default():null,t=(n=this.$attrs,(o=this.componentData)?a(a({},o.props),o.attrs):n);var n,o;return e?(this.transitionMode=function(e){if(!e||1!==e.length)return!1;const[{type:t}]=e;return!!t&&(n=t.name,["transition-group","TransitionGroup"].includes(n));var n}(e),u(this.getTag(),t,e)):u(this.getTag(),t,[])},created(){null!==this.list&&null!==this.modelValue&&Ft.error("list props are mutually exclusive! Please set one.")},mounted(){const e={};Wt.forEach((t=>{e["on"+t]=$t.call(this,t)})),qt.forEach((t=>{e["on"+t]=zt.bind(this,t)}));const t=Object.keys(this.$attrs).reduce(((e,t)=>(e[Bt(t)]=this.$attrs[t],e)),{}),n=Object.assign({},t,e,{onMove:(e,t)=>this.onDragMove(e,t)});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new yt(this.$el,n),this.computeIndexes()},beforeUnmount(){try{void 0!==this._sortable&&this._sortable.destroy()}catch(e){}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(e){this.updateOptions(e)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?d(this.component):this.tag},updateOptions(e){for(var t in e){const n=Bt(t);-1===Jt.indexOf(n)&&this._sortable.option(n,e[t])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick((()=>{this.visibleIndexes=function(e,t,n,o){if(!e)return[];const i=Object.values(e),a=t.length-o;return[...t].map(((e,t)=>t>=a?i.length:i.indexOf(e)))}(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)}))},getUnderlyingVm(e){const t=function(e,t){return Object.values(e).indexOf(t)}(this.getChildrenNodes()||[],e);if(-1===t)return null;return{index:t,element:this.realList[t]}},emitChanges(e){this.$nextTick((()=>{this.$emit("change",e)}))},alterList(e){if(this.list)return void e(this.list);const t=[...this.modelValue];e(t),this.$emit("update:modelValue",t)},spliceList(){this.alterList((e=>e.splice(...arguments)))},updatePosition(e,t){this.alterList((n=>n.splice(t,0,n.splice(e,1)[0])))},getVmIndex(e){const t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(e){if(!this.noTransitionOnDrag||!this.transitionMode)return;this.getChildrenNodes()[e].data=null;const t=this.getComponent();t.children=[],t.kept=void 0},onDragStart(e){this.context=this.getUnderlyingVm(e.item),this.context&&(e.item._underlying_vm_=this.clone(this.context.element),Gt=e.item)},onDragAdd(e){const t=e.item._underlying_vm_;if(void 0===t)return;Ut(e.item);const n=this.getVmIndex(e.newIndex);this.spliceList(n,0,t),this.computeIndexes();const o={element:t,newIndex:n};this.emitChanges({added:o})},onDragRemove(e){if(Ht(this.$el,e.item,e.oldIndex),"clone"===e.pullMode)return void Ut(e.clone);if(!this.context)return;const t=this.context.index;this.spliceList(t,1);const n={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:n})},onDragUpdate(e){Ut(e.item),Ht(e.from,e.item,e.oldIndex);const t=this.context.index,n=this.getVmIndex(e.newIndex);this.updatePosition(t,n);const o={element:this.context.element,oldIndex:t,newIndex:n};this.emitChanges({moved:o})},updateProperty(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},onDragMove(e,t){const n=this.move;if(!n||!this.realList)return!0;const o=this.getRelatedContextFromMoveEvent(e),i=this.context,a=this.computeFutureIndex(o,e);Object.assign(i,{futureIndex:a});return n(Object.assign({},e,{relatedContext:o,draggedContext:i}),t)},onDragEnd(){this.computeIndexes(),Gt=null},getRelatedContextFromMoveEvent({to:e,related:t}){const n=this;if(!n)return{component:n};const o=n.realList,i={list:o,component:n};if(e!==t&&o&&n.getUnderlyingVm){const e=n.getUnderlyingVm(t);if(e)return Object.assign(e,i)}return i},computeFutureIndex(e,t){if(!e.element)return 0;const n=[...t.to.children].filter((e=>"none"!==e.style.display)),o=n.indexOf(t.related),i=e.component.getVmIndex(o);return-1!==n.indexOf(Gt)||!t.willInsertAfter?i:i+1}}}),Qt=g("div",null,"提示",-1),en=m(" 取消 "),tn=m(" 确定 ");var nn=r({props:{showModal:{type:Boolean,required:!0},inputVal:{type:String,required:!0},placeholder:{type:String,required:!0}},emits:["cancelClick","confirmClick","update:inputVal"],setup(e,{emit:t}){const n=e,o=h(),i=p("");f((()=>{i.value=n.inputVal}));const a=()=>{console.log("cancelClick"),t("cancelClick")},r=()=>{i.value?(t("update:inputVal",i.value),setTimeout((()=>{t("confirmClick")}),300)):o.error("请输入内容")};return(e,t)=>{const o=d("n-input"),u=d("n-button"),h=d("n-modal");return l(),s(h,{show:n.showModal,"show-icon":!1,preset:"dialog",title:"Dialog"},{header:v((()=>[Qt])),action:v((()=>[g("div",null,[c(u,{class:"mr-4",onClick:a},{default:v((()=>[en])),_:1}),c(u,{type:"error",onClick:r},{default:v((()=>[tn])),_:1})])])),default:v((()=>[g("div",null,[c(o,{value:i.value,"onUpdate:value":t[0]||(t[0]=e=>i.value=e),placeholder:n.placeholder},null,8,["value","placeholder"])])])),_:1},8,["show"])}}});const on=e=>{const t=localStorage.getItem("shootList");if(t){return JSON.parse(t).filter((t=>t.projectId!==e))||[]}return[]},an=e=>{const t=localStorage.getItem("shootList");if(t){const n=JSON.parse(t).filter((t=>t.projectId===e));if(n)return Promise.resolve(n)}return Promise.resolve([])},rn=async e=>{if(e.id&&e.projectId){const t=await an(e.projectId),n=t.findIndex((t=>e.id===t.id&&t.projectId===e.projectId));-1===n?t.push(e):t[n]=e;const o=on(e.projectId);return localStorage.setItem("shootList",JSON.stringify(o.concat(t))),Promise.resolve()}return Promise.reject()};E("data-v-052684fc");const ln={class:"\n      flex flex-col\n      items-center\n      w-60\n      bg-gray-100\n      overflow-auto\n      flex-shrink-0\n    "},sn=g("div",{class:"mt-4"},"分镜头列表",-1),cn=["onClick"],un=m(" 新建分镜头 ");D();var dn=r({emits:["updateSelectedSL"],setup(e,{emit:t}){const n=p([]),o=h(),i=b(),a=y(),r=p(!1),u=p({id:"",name:"",projectId:""}),f=[{label:"重命名",key:"edit"},{label:"删除",key:"delete"}],g=async e=>{r.value=!1,"edit"===e&&await rn(u.value),await R()},E=async()=>{const e={id:j(),projectId:i.query.id+"",name:"第"+(n.value.length+1)+"场"};try{await rn(e),o.success("保存成功"),await R()}catch(t){o.error("保存失败")}},D=async()=>{try{await(async(e,t)=>{const n=on(t);return localStorage.setItem("shootList",JSON.stringify(n.concat(e))),Promise.resolve()})(n.value,i.query.id+""),await R()}catch(e){o.error("调整顺序失败")}},M=e=>{u.value=e,t("updateSelectedSL",e)},P=async e=>{try{await(async e=>{if(e.id&&e.projectId){const t=await an(e.projectId),n=t.findIndex((t=>e.id===t.id));if(n>-1){t.splice(n,1);const o=on(e.projectId);return localStorage.setItem("shootList",JSON.stringify(o.concat(t))),Promise.resolve()}return Promise.reject()}return Promise.reject()})(e),o.success("删除成功"),await R()}catch(t){o.error("删除失败")}},k=async e=>{"edit"===e&&(r.value=!0),"delete"===e&&a.error({title:"提示",content:"是否删除?",positiveText:"确定",showIcon:!1,negativeText:"取消",onPositiveClick:()=>{P(u.value)}})},R=async()=>{try{n.value=await an(i.query.id+""),n.value.length>0&&M(n.value[0])}catch(e){o.error("获取分镜头列表失败")}};return w((()=>{R()})),(e,t)=>{const o=d("n-icon"),i=d("n-dropdown"),a=d("n-button");return l(),x("div",ln,[sn,c(S(Kt),{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),onChange:D},{default:v((()=>[c(C,null,{default:v((()=>[(l(!0),x(I,null,T(n.value,((e,t)=>(l(),x("div",{class:O(["sl-aside-item",e.id===u.value.id?"active":""]),key:t,onClick:t=>M(e)},[m(N(e.name||"新建分镜头"+(t+1))+" ",1),c(i,{trigger:"click",onSelect:k,options:f,"show-arrow":!0},{default:v((()=>[c(o,{class:"sl-aside-item-icon"},{default:v((()=>[c(S(A))])),_:1})])),_:1})],10,cn)))),128))])),_:1})])),_:1},8,["modelValue"]),c(a,{class:"mt-4 w-56",onClick:E},{icon:v((()=>[c(o,null,{default:v((()=>[c(S(L))])),_:1})])),default:v((()=>[un])),_:1}),r.value?(l(),s(nn,{key:0,showModal:r.value,inputVal:u.value.name,"onUpdate:inputVal":t[1]||(t[1]=e=>u.value.name=e),placeholder:"请输入新的名字",onCancelClick:t[2]||(t[2]=e=>g("cancel")),onConfirmClick:t[3]||(t[3]=e=>g("edit"))},null,8,["showModal","inputVal"])):_("v-if",!0)])}}});dn.__scopeId="data-v-052684fc";const hn=[{label:"超远景",value:"超远景"},{label:"远景",value:"远景"},{label:"全景",value:"全景"},{label:"中景",value:"中景"},{label:"近景",value:"近景"},{label:"特写",value:"特写"},{label:"大特写",value:"大特写"},{label:"自定义",value:"自定义"}],pn=[{label:"固定",value:"固定"},{label:"推动",value:"推动"},{label:"拉动",value:"拉动"},{label:"摇动",value:"摇动"},{label:"甩动",value:"甩动"},{label:"移动",value:"移动"},{label:"跟拍",value:"跟拍"},{label:"上升",value:"上升"},{label:"下降",value:"下降"}],fn=[{label:"低角度",value:"低角度"},{label:"高角度",value:"高角度"},{label:"俯视角度",value:"俯视角度"},{label:"视线高度",value:"视线高度"},{label:"地面高度",value:"地面高度"}];E("data-v-7e9fd0bd");const vn={class:"p-10 pt-5 flex-auto"},gn={class:"text-3xl pb-5"},mn=g("div",{class:"flex items-center h-10 bg-gray-50 text-gray-500 text-sm"},[g("span",{class:"w-20 pl-4"},"场次"),g("span",{class:"w-20 pl-4"},"镜号"),g("span",{class:"flex-auto pl-4"},"内容描述"),g("span",{class:"w-32 pl-4"},"景别"),g("span",{class:"w-32 pl-4"},"镜头类型"),g("span",{class:"w-40 pl-4"},"机位运动"),g("span",{class:"w-40 pl-4"},"备注"),g("span",{class:"w-32 pl-4"},"操作")],-1),bn={class:"w-20 pl-4"},yn={class:"w-20 pl-4"},wn={class:"flex-auto pl-4"},xn={class:"w-32 pl-4"},Sn={class:"w-32 pl-4"},_n={class:"w-40 pl-4"},En={class:"w-40 pl-4"},Dn=["onClick"],Cn={class:"flex items-center h-10 text-gray-500 text-sm text-gray-500"},In={class:"w-32 pl-4"},Tn={class:"flex items-center cursor-pointer"},On={class:"w-32 pl-4"},Nn={class:"flex items-center cursor-pointer"},Mn={class:"w-40 pl-4"},Pn={class:"flex items-center cursor-pointer"};D();var kn=r({props:{name:{type:String,required:!0},shootId:{type:String,required:!0}},setup(e){const t=e,n=p(!1),o=h(),i=p([]),a=p({id:"",shootId:"",cc:"",jh:"",nrms:"",jb:"",jwyd:"",bz:""});f((()=>{console.log("Loading",t.shootId),setTimeout((()=>{r(t.shootId)}),500)})),w((()=>{setTimeout((()=>{r(t.shootId)}),500)}));const r=async e=>{n.value=!0,i.value=await(e=>{const t=localStorage.getItem("shootDetail");if(t){const n=JSON.parse(t);return Promise.resolve(n.filter((t=>e===t.shootId))||[])}return Promise.resolve([])})(e),setTimeout((()=>{n.value=!1}),800)},u=async()=>{try{if(a.value.id=j(),a.value.shootId=t.shootId,!(a.value.id&&a.value.shootId&&a.value.cc&&a.value.jh&&a.value.nrms&&a.value.jb&&a.value.jwyd))return void o.error("请填写完整分镜头");await(async e=>{const t=localStorage.getItem("shootDetail")||JSON.stringify([]),n=JSON.parse(t);return n.push(e),localStorage.setItem("shootDetail",JSON.stringify(n)),Promise.resolve()})(a.value),a.value={id:"",shootId:"",cc:"",jh:"",nrms:"",jb:"",jwyd:"",bz:""},await r(t.shootId)}catch(e){o.error("保存失败")}},b=async e=>{try{await(async e=>{const t=localStorage.getItem("shootDetail")||JSON.stringify([]),n=JSON.parse(t),o=n.findIndex((t=>t.id===e.id));return-1===o?Promise.reject():(n.splice(o,1),localStorage.setItem("shootDetail",JSON.stringify(n)),Promise.resolve())})(e),o.success("删除成功"),await r(t.shootId)}catch(n){o.error("删除失败")}};return(e,o)=>{const r=d("n-icon"),h=d("n-popselect"),p=d("n-spin");return l(),s(p,{show:n.value},{default:v((()=>[g("div",vn,[g("div",gn,N(t.name),1),g("div",null,[mn,(l(!0),x(I,null,T(i.value,((e,t)=>(l(),x("div",{class:"flex items-center h-10 text-gray-500 text-sm text-gray-500",key:t},[g("span",bn,N(e.cc),1),g("span",yn,N(e.jh),1),g("span",wn,N(e.nrms),1),g("span",xn,N(e.jb),1),g("span",Sn,N(e.jtlx),1),g("span",_n,N(e.jwyd),1),g("span",En,N(e.bz),1),g("span",{class:"w-32 pl-4 cursor-pointer underline text-red-700",onClick:t=>b(e)}," 删除 ",8,Dn)])))),128)),g("div",Cn,[M(g("input",{class:"input w-20 h-10","onUpdate:modelValue":o[0]||(o[0]=e=>a.value.cc=e),type:"text",placeholder:"场次"},null,512),[[P,a.value.cc]]),M(g("input",{class:"input w-20 h-10","onUpdate:modelValue":o[1]||(o[1]=e=>a.value.jh=e),type:"text",placeholder:"镜号"},null,512),[[P,a.value.jh]]),M(g("input",{class:"input flex-auto","onUpdate:modelValue":o[2]||(o[2]=e=>a.value.nrms=e),type:"text",placeholder:"请输入内容描述"},null,512),[[P,a.value.nrms]]),g("div",In,[c(h,{options:S(hn),value:a.value.jb,"onUpdate:value":o[3]||(o[3]=e=>a.value.jb=e),trigger:"click",scrollable:""},{default:v((()=>[g("div",Tn,[m(N(a.value.jb||"景别")+" ",1),c(r,null,{default:v((()=>[c(S(Y))])),_:1})])])),_:1},8,["options","value"])]),g("div",On,[c(h,{options:S(fn),value:a.value.jtlx,"onUpdate:value":o[4]||(o[4]=e=>a.value.jtlx=e),trigger:"click",scrollable:""},{default:v((()=>[g("div",Nn,[m(N(a.value.jtlx||"镜头类型")+" ",1),c(r,null,{default:v((()=>[c(S(Y))])),_:1})])])),_:1},8,["options","value"])]),g("div",Mn,[c(h,{options:S(pn),value:a.value.jwyd,"onUpdate:value":o[5]||(o[5]=e=>a.value.jwyd=e),trigger:"click",scrollable:""},{default:v((()=>[g("div",Pn,[m(N(a.value.jwyd||"机位运动")+" ",1),c(r,null,{default:v((()=>[c(S(Y))])),_:1})])])),_:1},8,["options","value"])]),M(g("input",{class:"input w-40","onUpdate:modelValue":o[6]||(o[6]=e=>a.value.bz=e),type:"text",placeholder:"请输入内容描述"},null,512),[[P,a.value.bz]]),g("div",{class:"w-32 pl-4 cursor-pointer underline text-green-700",onClick:u}," 添加 ")])])])])),_:1},8,["show"])}}});kn.__scopeId="data-v-7e9fd0bd",E("data-v-2524e697");const jn={class:"\n        w-full\n        h-16\n        border-b border-solid border-gray-100\n        flex\n        items-center\n        px-10\n        justify-between\n      "},An=m(" 所有项目 "),Ln=m(" 分镜头列表 "),Rn={class:"sl-content flex"};D();var Xn=r({setup(e){const t=b(),n=k(),o=p(!1),i=p({id:"",name:"",projectId:""}),a=e=>{i.value=e},r=()=>{n.push({name:"ProjectHome"})},u=()=>{n.go(-1)};return(e,n)=>{const h=d("n-breadcrumb-item"),p=d("n-breadcrumb"),f=d("n-spin");return l(),s(f,{show:o.value},{default:v((()=>[g("div",jn,[c(p,null,{default:v((()=>[c(h,{onClick:r},{default:v((()=>[An])),_:1}),c(h,{onClick:u},{default:v((()=>[m(N(S(t).query.name),1)])),_:1}),c(h,null,{default:v((()=>[Ln])),_:1})])),_:1})]),g("div",Rn,[c(dn,{onUpdateSelectedSL:a}),i.value.id?(l(),s(kn,{key:0,shootId:i.value.id,name:i.value.name},null,8,["shootId","name"])):_("v-if",!0)])])),_:1},8,["show"])}}});Xn.__scopeId="data-v-2524e697";export{Xn as default};
